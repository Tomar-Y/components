{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///watermark.js","webpack:///webpack/bootstrap 40f8a48dc425240bf16c","webpack:///./src/lib/index.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","watermark","node","options","keys","length","document","querySelector","_init","_resizeSpace","_fillContent","_bindEvent","value","text","opacity","startX","startY","xSpace","ySpace","rows","cols","markWidth","markHeight","angle","fontSize","color","fontFamily","imageSrc","imageWidth","style","overflow","pageWidth","Math","max","scrollWidth","clientWidth","pageHeight","scrollHeight","clientHeight","ceil","floor","domTemp","createDocumentFragment","posY","j","posX","appendChild","_createWaterMark","markContainer","createElement","className","x","y","markDiv","innerHTML","createTextNode","webkitTransform","MozTransform","msTransform","OTransform","transform","position","left","top","zIndex","width","height","display","pointerEvents","textAlign","that","window","onresize","refresh","show","hide","watermarkPlugin","install","Vue","$Watermark"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,OAAA,eAAAH,GACA,gBAAAC,SACAA,QAAA,UAAAD,IAEAD,EAAA,UAAAC,KACC,mBAAAK,WAAAC,KAAA,WACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAR,OAGA,IAAAC,GAAAQ,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAX,WAUA,OANAM,GAAAE,GAAAI,KAAAX,EAAAD,QAAAC,IAAAD,QAAAO,GAGAN,EAAAU,GAAA,EAGAV,EAAAD,QAvBA,GAAAS,KA4DA,OAhCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAAAf,EAAAgB,EAAAC,GACAV,EAAAW,EAAAlB,EAAAgB,IACAG,OAAAC,eAAApB,EAAAgB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAvB,GACA,GAAAgB,GAAAhB,KAAAwB,WACA,WAA2B,MAAAxB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAM,GAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDpB,EAAAuB,EAAA,UAGAvB,IAAAwB,EAAA,KDgBM,SAAU9B,EAAQ+B,EAAqBzB,GAE7C,YEzEA,SAAS0B,GAAUC,EAAMC,GACvB,KAAM9B,eAAgB4B,IAAY,MAAO,IAAIA,GAAUC,EAAMC,KAExDA,GAAWhB,OAAOiB,KAAKD,GAASE,OAAS,KAC5CF,MAIA9B,KAAK6B,KADe,gBAAVA,GACEI,SAASC,cAAcL,GAEvBA,EAGd7B,KAAKmC,MAAMnC,KAAK6B,KAAMC,GACtB9B,KAAKoC,eACLpC,KAAKqC,eACLrC,KAAKsC,aAtBPxB,OAAAC,eAAAY,EAAA,cAAAY,OAAA,IAwBAX,EAAUL,WAERY,MAAO,SAASN,EAAMC,GACpB9B,KAAK8B,SACDD,KAAKA,EACLW,KAAMV,EAAQU,KAAOV,EAAQU,KAAO,GACpCC,QAASX,EAAQW,QAAUX,EAAQW,QAAU,IAC7CC,OAAQZ,EAAQY,OAASZ,EAAQY,OAAQ,EACzCC,OAAQb,EAAQa,OAASb,EAAQa,OAAQ,GACzCC,OAAQ,IACRC,OAAQ,GACRC,KAAM,EACNC,KAAK,EACLC,UAAWlB,EAAQkB,UAAYlB,EAAQkB,UAAW,IAClDC,WAAYnB,EAAQmB,WAAanB,EAAQmB,WAAY,GACrDC,MAAOpB,EAAQoB,MAAQpB,EAAQoB,MAAO,GACtCC,SAAUrB,EAAQqB,SAAWrB,EAAQqB,SAAU,GAC/CC,MAAOtB,EAAQsB,MAAQtB,EAAQsB,MAAO,OACtCC,WAAYvB,EAAQuB,WAAavB,EAAQuB,WAAY,OACrDC,SAAUxB,EAAQwB,SAAWxB,EAAQwB,SAAU,GAC/CC,WAAYzB,EAAQyB,WAAazB,EAAQyB,WAAa,IAE1D1B,EAAK2B,MAAMC,SAAW,UAGxBrB,aAAc,WACZpC,KAAK0D,UAAaC,KAAKC,IAAI5D,KAAK8B,QAAQD,KAAKgC,YAAY7D,KAAK8B,QAAQD,KAAKiC,aAC3E9D,KAAK+D,WAAc,EAAIJ,KAAKC,IAAI5D,KAAK8B,QAAQD,KAAKmC,aAAahE,KAAK8B,QAAQD,KAAKoC,cAMjFjE,KAAK8B,QAAQgB,KAAOa,KAAKO,MAAMlE,KAAK+D,WAAa/D,KAAK8B,QAAQa,SAAW3C,KAAK8B,QAAQmB,WAAajD,KAAK8B,QAAQe,SAChH7C,KAAK8B,QAAQe,OAASc,KAAKQ,OAAOnE,KAAK+D,WAAa/D,KAAK8B,QAAQa,QAAU3C,KAAK8B,QAAQgB,KAAO9C,KAAK8B,QAAQmB,YAE5GjD,KAAK8B,QAAQiB,KAAQ,EAAIY,KAAKO,MAAMlE,KAAK0D,UAAY1D,KAAK8B,QAAQY,SAAW1C,KAAK8B,QAAQkB,UAAYhD,KAAK8B,QAAQc,SACnH5C,KAAK8B,QAAQc,OAASe,KAAKQ,OAAOnE,KAAK0D,UAAY1D,KAAK8B,QAAQY,QAAU1C,KAAK8B,QAAQiB,KAAO/C,KAAK8B,QAAQkB,YAG7GX,aAAa,WAEX,IAAK,GADD+B,GAAUnC,SAASoC,yBACdhE,EAAI,EAAGA,EAAIL,KAAK8B,QAAQgB,KAAMzC,IAEnC,IAAK,GADDiE,GAAOjE,GAAKL,KAAK8B,QAAQmB,WAAajD,KAAK8B,QAAQe,QAAU7C,KAAK8B,QAAQa,OACrE4B,EAAI,EAAGA,EAAIvE,KAAK8B,QAAQiB,KAAMwB,IAAK,CACxC,GAAIC,GAAOD,GAAKvE,KAAK8B,QAAQkB,UAAYhD,KAAK8B,QAAQc,QAAU5C,KAAK8B,QAAQY,MAC7E0B,GAAQK,YAAYzE,KAAK0E,iBAAiBF,EAAMF,IAGxDtE,KAAK2E,cAAgB1C,SAAS2C,cAAc,OAC5C5E,KAAK2E,cAAcE,UAAY,uBAC/B7E,KAAK2E,cAAcF,YAAYL,GAC/BpE,KAAK8B,QAAQD,KAAK4C,YAAYzE,KAAK2E,gBAGrCD,iBAAkB,SAASI,EAAGC,GAC5B,GAAIC,GAAU/C,SAAS2C,cAAc,MA2BrC,OA1BAI,GAAQH,UAAY,kBAChB7E,KAAK8B,QAAQwB,SACb0B,EAAQC,UAAY,QAAQjF,KAAK8B,QAAQU,KAAK,qBAAqBxC,KAAK8B,QAAQyB,WAAW,UAAUvD,KAAK8B,QAAQwB,SAAS,MAE3H0B,EAAQP,YAAYxC,SAASiD,eAAelF,KAAK8B,QAAQU,OAG7DwC,EAAQxB,MAAM2B,gBAAkB,WAAanF,KAAK8B,QAAQoB,MAAQ,OAClE8B,EAAQxB,MAAM4B,aAAe,WAAapF,KAAK8B,QAAQoB,MAAQ,OAC/D8B,EAAQxB,MAAM6B,YAAc,WAAarF,KAAK8B,QAAQoB,MAAQ,OAC9D8B,EAAQxB,MAAM8B,WAAa,WAAatF,KAAK8B,QAAQoB,MAAQ,OAC7D8B,EAAQxB,MAAM+B,UAAY,WAAavF,KAAK8B,QAAQoB,MAAQ,OAC5D8B,EAAQxB,MAAMgC,SAAW,WACzBR,EAAQxB,MAAMiC,KAAOX,EAAI,KACzBE,EAAQxB,MAAMkC,IAAMX,EAAI,KACxBC,EAAQxB,MAAMC,SAAW,SACzBuB,EAAQxB,MAAMmC,OAAS,QACvBX,EAAQxB,MAAMoC,MAAQ5F,KAAK8B,QAAQkB,UAAY,KAC/CgC,EAAQxB,MAAMqC,OAAS7F,KAAK8B,QAAQmB,WAAa,KACjD+B,EAAQxB,MAAMsC,QAAU,QACxBd,EAAQxB,MAAMuC,cAAc,OAC5Bf,EAAQxB,MAAMf,QAAUzC,KAAK8B,QAAQW,QACrCuC,EAAQxB,MAAMwC,UAAY,SAC1BhB,EAAQxB,MAAMH,WAAarD,KAAK8B,QAAQuB,WACxC2B,EAAQxB,MAAML,SAAWnD,KAAK8B,QAAQqB,SACtC6B,EAAQxB,MAAMJ,MAAQpD,KAAK8B,QAAQsB,MAC5B4B,GAGT1C,WAAY,WACV,GAAI2D,GAAOjG,IAEXkG,QAAOC,SAAW,WACdF,EAAKG,YAKXA,QAAS,WACHpG,KAAK2E,gBACL3E,KAAK2E,cAAcM,UAAY,IAEnCjF,KAAKmC,MAAMnC,KAAK8B,QAAQD,KAAM7B,KAAK8B,SACnC9B,KAAKoC,eACLpC,KAAKqC,gBAGPgE,KAAM,WACJrG,KAAK2E,cAAcnB,MAAMsC,QAAU,SAGrCQ,KAAM,WACJtG,KAAK2E,cAAcnB,MAAMsC,QAAU,QAIvC,IAAMS,KACNA,GAAgBC,QAAU,SAAUC,EAAK3E,GAEvC2E,EAAIlF,UAAUmF,WAAa9E,GAE7BD,EAAA","file":"watermark.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"waterMark\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"waterMark\"] = factory();\n\telse\n\t\troot[\"waterMark\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"waterMark\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"waterMark\"] = factory();\n\telse\n\t\troot[\"waterMark\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/*\r\n * 水印\r\n * 说明: 可以添加图片水印和文字水印\r\n * 当水印容器大小发生变化时需要调用refresh方法重新填充水印\r\n *  */\n\nfunction watermark(node, options) {\n  if (!(this instanceof watermark)) return new watermark(node, options);\n\n  if (!options || Object.keys(options).length < 1) {\n    options = {};\n  }\n\n  if (typeof node === \"string\") {\n    this.node = document.querySelector(node);\n  } else {\n    this.node = node;\n  }\n\n  this._init(this.node, options);\n  this._resizeSpace();\n  this._fillContent();\n  this._bindEvent();\n}\nwatermark.prototype = {\n  /* 初始化 */\n  _init: function _init(node, options) {\n    this.options = {\n      node: node, // 添加水印的节点\n      text: options.text ? options.text : \"\", // 水印文字内容\n      opacity: options.opacity ? options.opacity : 0.15, // 水印透明度\n      startX: options.startX ? options.startX : 0, // X轴开始位置\n      startY: options.startY ? options.startY : 15, // Y轴开始位置\n      xSpace: 100, // 横向间隔\n      ySpace: 50, // 纵向间隔\n      rows: 0, // 行数\n      cols: 0, // 列数\n      markWidth: options.markWidth ? options.markWidth : 210, // 水印高度\n      markHeight: options.markHeight ? options.markHeight : 80, // 水印宽度\n      angle: options.angle ? options.angle : 20, // 倾斜角度\n      fontSize: options.fontSize ? options.fontSize : 12, // 字体大小\n      color: options.color ? options.color : \"#000\", // 字体颜色\n      fontFamily: options.fontFamily ? options.fontFamily : '微软雅黑', // 字体\n      imageSrc: options.imageSrc ? options.imageSrc : '', // 图片地址\n      imageWidth: options.imageWidth ? options.imageWidth : ''\n    };\n    node.style.overflow = 'hidden';\n  },\n  /* 自动调整每个水印间距 使其可以填充整个页面 */\n  _resizeSpace: function _resizeSpace() {\n    this.pageWidth = Math.max(this.options.node.scrollWidth, this.options.node.clientWidth);\n    this.pageHeight = 1 + Math.max(this.options.node.scrollHeight, this.options.node.clientHeight);\n    // 计算旋转后的元素所占宽度和高度\n    // var radian = this.options.angle / 180 * Math.PI\n    // var newMarkHeight = this.options.markHeight * Math.cos(radian) + this.options.markWidth * Math.sin(radian)\n\n    // 获取水印行数 并根据行数调整间距使水印填满屏幕\n    this.options.rows = Math.ceil((this.pageHeight - this.options.startY) / (this.options.markHeight + this.options.ySpace));\n    this.options.ySpace = Math.floor((this.pageHeight - this.options.startY) / this.options.rows - this.options.markHeight);\n    // 获取水印列数 并根据列数调整间距使水印填满屏幕\n    this.options.cols = 1 + Math.ceil((this.pageWidth - this.options.startX) / (this.options.markWidth + this.options.xSpace));\n    this.options.xSpace = Math.floor((this.pageWidth - this.options.startX) / this.options.cols - this.options.markWidth);\n  },\n  /* 填充水印 */\n  _fillContent: function _fillContent() {\n    var domTemp = document.createDocumentFragment();\n    for (var i = 0; i < this.options.rows; i++) {\n      var posY = i * (this.options.markHeight + this.options.ySpace) + this.options.startY;\n      for (var j = 0; j < this.options.cols; j++) {\n        var posX = j * (this.options.markWidth + this.options.xSpace) + this.options.startX;\n        domTemp.appendChild(this._createWaterMark(posX, posY));\n      }\n    }\n    this.markContainer = document.createElement('div');\n    this.markContainer.className = 'water-mark-container';\n    this.markContainer.appendChild(domTemp);\n    this.options.node.appendChild(this.markContainer);\n  },\n  /* 构造每个水印节点 */\n  _createWaterMark: function _createWaterMark(x, y) {\n    var markDiv = document.createElement('div');\n    markDiv.className = 'water-mark-item';\n    if (this.options.imageSrc) {\n      markDiv.innerHTML = \"<div>\" + this.options.text + \"</div><img width='\" + this.options.imageWidth + \"' src='\" + this.options.imageSrc + \"'/>\";\n    } else {\n      markDiv.appendChild(document.createTextNode(this.options.text));\n    }\n    //设置水印div倾斜显示\n    markDiv.style.webkitTransform = \"rotate(-\" + this.options.angle + \"deg)\";\n    markDiv.style.MozTransform = \"rotate(-\" + this.options.angle + \"deg)\";\n    markDiv.style.msTransform = \"rotate(-\" + this.options.angle + \"deg)\";\n    markDiv.style.OTransform = \"rotate(-\" + this.options.angle + \"deg)\";\n    markDiv.style.transform = \"rotate(-\" + this.options.angle + \"deg)\";\n    markDiv.style.position = \"absolute\";\n    markDiv.style.left = x + 'px';\n    markDiv.style.top = y + 'px';\n    markDiv.style.overflow = \"hidden\";\n    markDiv.style.zIndex = \"99999\";\n    markDiv.style.width = this.options.markWidth + 'px';\n    markDiv.style.height = this.options.markHeight + 'px';\n    markDiv.style.display = \"block\";\n    markDiv.style.pointerEvents = 'none';\n    markDiv.style.opacity = this.options.opacity;\n    markDiv.style.textAlign = \"center\";\n    markDiv.style.fontFamily = this.options.fontFamily;\n    markDiv.style.fontSize = this.options.fontSize;\n    markDiv.style.color = this.options.color;\n    return markDiv;\n  },\n  /* 事件监听 */\n  _bindEvent: function _bindEvent() {\n    var that = this;\n    // 监听浏览器大小变化事件 动态调整水印\n    window.onresize = function () {\n      that.refresh();\n    };\n  },\n\n  /* 刷新水印 水印容器大小发生变化是调用 */\n  refresh: function refresh() {\n    if (this.markContainer) {\n      this.markContainer.innerHTML = '';\n    }\n    this._init(this.options.node, this.options);\n    this._resizeSpace();\n    this._fillContent();\n  },\n  /* 显示水印图层 */\n  show: function show() {\n    this.markContainer.style.display = 'block';\n  },\n  /* 隐藏水印图层 */\n  hide: function hide() {\n    this.markContainer.style.display = 'none';\n  }\n};\n\nvar watermarkPlugin = {};\nwatermarkPlugin.install = function (Vue, options) {\n  // 4. 添加实例方法\n  Vue.prototype.$Watermark = watermark;\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (watermarkPlugin);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// watermark.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 40f8a48dc425240bf16c","/*\r\n * 水印\r\n * 说明: 可以添加图片水印和文字水印\r\n * 当水印容器大小发生变化时需要调用refresh方法重新填充水印\r\n *  */\r\n\r\nfunction watermark(node, options) {\r\n  if (!(this instanceof watermark)) return new watermark(node, options)\r\n  \r\n  if (!options || Object.keys(options).length < 1) {\r\n    options = {  }\r\n  }\r\n\r\n  if ((typeof node) === \"string\") {\r\n    this.node = document.querySelector(node);\r\n  } else {\r\n    this.node = node;\r\n  }\r\n\r\n  this._init(this.node, options)\r\n  this._resizeSpace()\r\n  this._fillContent()\r\n  this._bindEvent()\r\n}\r\nwatermark.prototype = {\r\n  /* 初始化 */\r\n  _init: function(node, options) {\r\n    this.options = {\r\n        node:node,                                               // 添加水印的节点\r\n        text: options.text ? options.text : \"\",                      // 水印文字内容\r\n        opacity: options.opacity ? options.opacity : 0.15,           // 水印透明度\r\n        startX: options.startX ? options.startX: 0,                 // X轴开始位置\r\n        startY: options.startY ? options.startY: 15,                // Y轴开始位置\r\n        xSpace: 100,                                             // 横向间隔\r\n        ySpace: 50,                                              // 纵向间隔\r\n        rows: 0,                                                 // 行数\r\n        cols:0,                                                  // 列数\r\n        markWidth: options.markWidth ? options.markWidth: 210,      // 水印高度\r\n        markHeight: options.markHeight ? options.markHeight: 80,    // 水印宽度\r\n        angle: options.angle ? options.angle: 20,                   // 倾斜角度\r\n        fontSize: options.fontSize ? options.fontSize: 12,          // 字体大小\r\n        color: options.color ? options.color: \"#000\",               // 字体颜色\r\n        fontFamily: options.fontFamily ? options.fontFamily: '微软雅黑', // 字体\r\n        imageSrc: options.imageSrc ? options.imageSrc: '',         // 图片地址\r\n        imageWidth: options.imageWidth ? options.imageWidth : ''\r\n    }\r\n    node.style.overflow = 'hidden'\r\n  },\r\n  /* 自动调整每个水印间距 使其可以填充整个页面 */\r\n  _resizeSpace: function() {\r\n    this.pageWidth =  Math.max(this.options.node.scrollWidth,this.options.node.clientWidth)\r\n    this.pageHeight =  1 + Math.max(this.options.node.scrollHeight,this.options.node.clientHeight)\r\n    // 计算旋转后的元素所占宽度和高度\r\n    // var radian = this.options.angle / 180 * Math.PI\r\n    // var newMarkHeight = this.options.markHeight * Math.cos(radian) + this.options.markWidth * Math.sin(radian)\r\n\r\n    // 获取水印行数 并根据行数调整间距使水印填满屏幕\r\n    this.options.rows = Math.ceil((this.pageHeight - this.options.startY) / (this.options.markHeight + this.options.ySpace))\r\n    this.options.ySpace = Math.floor((this.pageHeight - this.options.startY) / this.options.rows - this.options.markHeight)\r\n    // 获取水印列数 并根据列数调整间距使水印填满屏幕\r\n    this.options.cols =  1 + Math.ceil((this.pageWidth - this.options.startX) / (this.options.markWidth + this.options.xSpace))\r\n    this.options.xSpace = Math.floor((this.pageWidth - this.options.startX) / this.options.cols - this.options.markWidth)\r\n  },\r\n  /* 填充水印 */\r\n  _fillContent:function() {\r\n    var domTemp = document.createDocumentFragment()\r\n    for (var i = 0; i < this.options.rows; i++) {\r\n        var posY = i * (this.options.markHeight + this.options.ySpace) + this.options.startY\r\n        for (var j = 0; j < this.options.cols; j++) {\r\n            var posX = j * (this.options.markWidth + this.options.xSpace) + this.options.startX\r\n            domTemp.appendChild(this._createWaterMark(posX, posY))\r\n        }\r\n    }\r\n    this.markContainer = document.createElement('div')\r\n    this.markContainer.className = 'water-mark-container'\r\n    this.markContainer.appendChild(domTemp)\r\n    this.options.node.appendChild(this.markContainer)\r\n  },\r\n  /* 构造每个水印节点 */\r\n  _createWaterMark: function(x, y) {\r\n    var markDiv = document.createElement('div')\r\n    markDiv.className = 'water-mark-item'\r\n    if (this.options.imageSrc) {\r\n        markDiv.innerHTML = \"<div>\"+this.options.text+\"</div><img width='\"+this.options.imageWidth+\"' src='\"+this.options.imageSrc+\"'/>\"\r\n    } else {\r\n        markDiv.appendChild(document.createTextNode(this.options.text))\r\n    }\r\n    //设置水印div倾斜显示\r\n    markDiv.style.webkitTransform = \"rotate(-\" + this.options.angle + \"deg)\"\r\n    markDiv.style.MozTransform = \"rotate(-\" + this.options.angle + \"deg)\"\r\n    markDiv.style.msTransform = \"rotate(-\" + this.options.angle + \"deg)\"\r\n    markDiv.style.OTransform = \"rotate(-\" + this.options.angle + \"deg)\"\r\n    markDiv.style.transform = \"rotate(-\" + this.options.angle + \"deg)\"\r\n    markDiv.style.position = \"absolute\"\r\n    markDiv.style.left = x + 'px'\r\n    markDiv.style.top = y + 'px'\r\n    markDiv.style.overflow = \"hidden\"\r\n    markDiv.style.zIndex = \"99999\"\r\n    markDiv.style.width = this.options.markWidth + 'px'\r\n    markDiv.style.height = this.options.markHeight + 'px'\r\n    markDiv.style.display = \"block\"\r\n    markDiv.style.pointerEvents='none'\r\n    markDiv.style.opacity = this.options.opacity\r\n    markDiv.style.textAlign = \"center\"\r\n    markDiv.style.fontFamily = this.options.fontFamily\r\n    markDiv.style.fontSize = this.options.fontSize\r\n    markDiv.style.color = this.options.color\r\n    return markDiv\r\n  },\r\n  /* 事件监听 */\r\n  _bindEvent: function() {\r\n    var that = this\r\n    // 监听浏览器大小变化事件 动态调整水印\r\n    window.onresize = function() {\r\n        that.refresh()\r\n    }\r\n  },\r\n\r\n  /* 刷新水印 水印容器大小发生变化是调用 */\r\n  refresh: function() {\r\n    if (this.markContainer) {\r\n        this.markContainer.innerHTML = ''\r\n    }\r\n    this._init(this.options.node, this.options)\r\n    this._resizeSpace()\r\n    this._fillContent()\r\n  },\r\n  /* 显示水印图层 */\r\n  show: function() {\r\n    this.markContainer.style.display = 'block'\r\n  },\r\n  /* 隐藏水印图层 */\r\n  hide: function() {\r\n    this.markContainer.style.display = 'none'\r\n  }\r\n}\r\n\r\nconst watermarkPlugin = {}\r\nwatermarkPlugin.install = function (Vue, options) {\r\n  // 4. 添加实例方法\r\n  Vue.prototype.$Watermark = watermark\r\n}\r\nexport default watermarkPlugin\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js"],"sourceRoot":""}