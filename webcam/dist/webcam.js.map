{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webcam.js","webpack:///webpack/bootstrap f403acd25b44d355b502","webpack:///./src/lib/index.js","webpack:///./src/lib/webcam.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__webcam__","__WEBPACK_IMPORTED_MODULE_0__webcam___default","Webcam","install","Vue","window","$Webcam","a","__WEBPACK_AMD_DEFINE_RESULT__","_typeof","Symbol","iterator","obj","constructor","FlashError","temp","Error","apply","arguments","stack","message","WebcamError","_userMedia","IntermediateInheritor","version","protocol","location","match","loaded","live","userMedia","iOS","test","navigator","userAgent","MSStream","params","width","height","dest_width","dest_height","image_format","jpeg_quality","enable_flash","force_flash","flip_horiz","fps","upload_name","constraints","swfURL","flashNotDetectedText","noInterfaceFoundText","unfreeze_snap","iosPlaceholderText","user_callback","user_canvas","errors","hooks","init","mediaDevices","getUserMedia","mozGetUserMedia","webkitGetUserMedia","Promise","y","URL","webkitURL","mozURL","msURL","parseInt","RegExp","$1","addEventListener","event","reset","exifOrientation","binFile","dataView","DataView","getUint8","console","log","offset","byteLength","str","String","fromCharCode","bigEnd","getUint16","firstIFDOffset","getUint32","dataStart","entries","entryOffset","valueType","numValues","fixOrientation","origObjURL","orientation","targetImg","img","Image","canvas","document","createElement","ctx","getContext","transform","drawImage","src","toDataURL","attach","elem","getElementById","querySelector","dispatch","container","innerHTML","peg","appendChild","offsetWidth","offsetHeight","undefined","scaleX","scaleY","video","setAttribute","style","overflow","webkitTransformOrigin","mozTransformOrigin","msTransformOrigin","oTransformOrigin","transformOrigin","webkitTransform","mozTransform","msTransform","oTransform","audio","mandatory","minWidth","minHeight","then","stream","onloadedmetadata","e","flip","srcObject","createObjectURL","catch","err","detectFlash","setTimeout","div","id","className","textAlign","display","verticalAlign","backgroundRepeat","backgroundSize","backgroundPosition","span","input","target","files","length","type","indexOf","objURL","image","ratio","Math","min","sw","sh","sx","sy","dataURL","backgroundImage","fileReader","FileReader","result","http","XMLHttpRequest","open","responseType","onload","status","readAsArrayBuffer","response","send","snap","focus","click","getSWFHTML","crop_width","crop_height","scaled_crop_width","floor","scaled_crop_height","scrollLeft","scrollTop","preview_active","unfreeze","unflip","getVideoTracks","tracks","stop","movie","getMovie","_releaseCamera","set","key","on","callback","replace","toLowerCase","push","off","idx","splice","args","Array","slice","len","hook","toString","alert","setSWFLocation","win","nav","hasFlash","plugins","description","mimeTypes","enabledPlugin","ActiveXObject","ax","ver","GetVariable","html","base_url","scpts","getElementsByTagName","getAttribute","localStorage","getItem","new_user","setItem","flashvars","escape","_snap","freeze","final_width","final_height","preview_canvas","preview_context","position","left","top","insertBefore","removeChild","sty","filter","msFilter","savePreview","context","translate","scale","func","crop_canvas","crop_context","iFunc","_x","_iFunc","removeEventListener","removeAttribute","raw_data","configure","panel","_configure","flashNotify","msg","b64ToUint6","nChr","base64DecToArr","sBase64","nBlocksSize","nMod3","nMod4","sB64Enc","nInLen","nOutLen","ceil","taBytes","Uint8Array","nUint24","nOutIdx","nInIdx","charCodeAt","upload","image_data_uri","target_url","form_elem_name","image_fmt","raw_image_data","lengthComputable","progress","total","responseText","statusText","blob","Blob","form","FormData","append"],"mappings":"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","file":"webcam.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"webcam\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"webcam\"] = factory();\n\telse\n\t\troot[\"webcam\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"webcam\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"webcam\"] = factory();\n\telse\n\t\troot[\"webcam\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__webcam__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__webcam___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__webcam__);\n/**\r\n * Created by Tomar-Y on 17/07/2018\r\n */\n\nvar Webcam = {\n  install: function install(Vue) {\n    if (typeof window !== 'undefined' && window.Vue) {\n      Vue = window.Vue;\n    }\n    Vue.prototype.$Webcam = __WEBPACK_IMPORTED_MODULE_0__webcam___default.a;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Webcam);\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n// WebcamJS v1.0.25\n// Webcam library for capturing JPEG/PNG images in JavaScript\n// Attempts getUserMedia, falls back to Flash\n// Author: Joseph Huckaby: http://github.com/jhuckaby\n// Based on JPEGCam: http://code.google.com/p/jpegcam/\n// Copyright (c) 2012 - 2017 Joseph Huckaby\n// Licensed under the MIT License\n\n(function (window) {\n\tvar _userMedia;\n\n\t// declare error types\n\n\t// inheritance pattern here:\n\t// https://stackoverflow.com/questions/783818/how-do-i-create-a-custom-error-in-javascript\n\tfunction FlashError() {\n\t\tvar temp = Error.apply(this, arguments);\n\t\ttemp.name = this.name = \"FlashError\";\n\t\tthis.stack = temp.stack;\n\t\tthis.message = temp.message;\n\t}\n\n\tfunction WebcamError() {\n\t\tvar temp = Error.apply(this, arguments);\n\t\ttemp.name = this.name = \"WebcamError\";\n\t\tthis.stack = temp.stack;\n\t\tthis.message = temp.message;\n\t}\n\n\tvar IntermediateInheritor = function IntermediateInheritor() {};\n\tIntermediateInheritor.prototype = Error.prototype;\n\n\tFlashError.prototype = new IntermediateInheritor();\n\tWebcamError.prototype = new IntermediateInheritor();\n\n\tvar Webcam = {\n\t\tversion: '1.0.25',\n\n\t\t// globals\n\t\tprotocol: location.protocol.match(/https/i) ? 'https' : 'http',\n\t\tloaded: false, // true when webcam movie finishes loading\n\t\tlive: false, // true when webcam is initialized and ready to snap\n\t\tuserMedia: true, // true when getUserMedia is supported natively\n\n\t\tiOS: /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream,\n\n\t\tparams: {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tdest_width: 0, // size of captured image\n\t\t\tdest_height: 0, // these default to width/height\n\t\t\timage_format: 'jpeg', // image format (may be jpeg or png)\n\t\t\tjpeg_quality: 90, // jpeg image quality from 0 (worst) to 100 (best)\n\t\t\tenable_flash: true, // enable flash fallback,\n\t\t\tforce_flash: false, // force flash mode,\n\t\t\tflip_horiz: false, // flip image horiz (mirror mode)\n\t\t\tfps: 30, // camera frames per second\n\t\t\tupload_name: 'webcam', // name of file in upload post data\n\t\t\tconstraints: null, // custom user media constraints,\n\t\t\tswfURL: '', // URI to webcam.swf movie (defaults to the js location)\n\t\t\tflashNotDetectedText: 'ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).',\n\t\t\tnoInterfaceFoundText: 'No supported webcam interface found.',\n\t\t\tunfreeze_snap: true, // Whether to unfreeze the camera after snap (defaults to true)\n\t\t\tiosPlaceholderText: 'Click here to open camera.',\n\t\t\tuser_callback: null, // callback function for snapshot (used if no user_callback parameter given to snap function)\n\t\t\tuser_canvas: null // user provided canvas for snapshot (used if no user_canvas parameter given to snap function)\n\t\t},\n\n\t\terrors: {\n\t\t\tFlashError: FlashError,\n\t\t\tWebcamError: WebcamError\n\t\t},\n\n\t\thooks: {}, // callback hook functions\n\n\t\tinit: function init() {\n\t\t\t// initialize, check for getUserMedia support\n\t\t\tvar self = this;\n\n\t\t\t// Setup getUserMedia, with polyfill for older browsers\n\t\t\t// Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n\t\t\tthis.mediaDevices = navigator.mediaDevices && navigator.mediaDevices.getUserMedia ? navigator.mediaDevices : navigator.mozGetUserMedia || navigator.webkitGetUserMedia ? {\n\t\t\t\tgetUserMedia: function getUserMedia(c) {\n\t\t\t\t\treturn new Promise(function (y, n) {\n\t\t\t\t\t\t(navigator.mozGetUserMedia || navigator.webkitGetUserMedia).call(navigator, c, y, n);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} : null;\n\n\t\t\twindow.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\t\t\tthis.userMedia = this.userMedia && !!this.mediaDevices && !!window.URL;\n\n\t\t\tif (this.iOS) {\n\t\t\t\tthis.userMedia = null;\n\t\t\t}\n\n\t\t\t// Older versions of firefox (< 21) apparently claim support but user media does not actually work\n\t\t\tif (navigator.userAgent.match(/Firefox\\D+(\\d+)/)) {\n\t\t\t\tif (parseInt(RegExp.$1, 10) < 21) this.userMedia = null;\n\t\t\t}\n\n\t\t\t// Make sure media stream is closed when navigating away from page\n\t\t\tif (this.userMedia) {\n\t\t\t\twindow.addEventListener('beforeunload', function (event) {\n\t\t\t\t\tself.reset();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\texifOrientation: function exifOrientation(binFile) {\n\t\t\t// extract orientation information from the image provided by iOS\n\t\t\t// algorithm based on exif-js\n\t\t\tvar dataView = new DataView(binFile);\n\t\t\tif (dataView.getUint8(0) != 0xFF || dataView.getUint8(1) != 0xD8) {\n\t\t\t\tconsole.log('Not a valid JPEG file');\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tvar offset = 2;\n\t\t\tvar marker = null;\n\t\t\twhile (offset < binFile.byteLength) {\n\t\t\t\t// find 0xFFE1 (225 marker)\n\t\t\t\tif (dataView.getUint8(offset) != 0xFF) {\n\t\t\t\t\tconsole.log('Not a valid marker at offset ' + offset + ', found: ' + dataView.getUint8(offset));\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tmarker = dataView.getUint8(offset + 1);\n\t\t\t\tif (marker == 225) {\n\t\t\t\t\toffset += 4;\n\t\t\t\t\tvar str = \"\";\n\t\t\t\t\tfor (n = 0; n < 4; n++) {\n\t\t\t\t\t\tstr += String.fromCharCode(dataView.getUint8(offset + n));\n\t\t\t\t\t}\n\t\t\t\t\tif (str != 'Exif') {\n\t\t\t\t\t\tconsole.log('Not valid EXIF data found');\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += 6; // tiffOffset\n\t\t\t\t\tvar bigEnd = null;\n\n\t\t\t\t\t// test for TIFF validity and endianness\n\t\t\t\t\tif (dataView.getUint16(offset) == 0x4949) {\n\t\t\t\t\t\tbigEnd = false;\n\t\t\t\t\t} else if (dataView.getUint16(offset) == 0x4D4D) {\n\t\t\t\t\t\tbigEnd = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dataView.getUint16(offset + 2, !bigEnd) != 0x002A) {\n\t\t\t\t\t\tconsole.log(\"Not valid TIFF data! (no 0x002A)\");\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar firstIFDOffset = dataView.getUint32(offset + 4, !bigEnd);\n\t\t\t\t\tif (firstIFDOffset < 0x00000008) {\n\t\t\t\t\t\tconsole.log(\"Not valid TIFF data! (First offset less than 8)\", dataView.getUint32(offset + 4, !bigEnd));\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// extract orientation data\n\t\t\t\t\tvar dataStart = offset + firstIFDOffset;\n\t\t\t\t\tvar entries = dataView.getUint16(dataStart, !bigEnd);\n\t\t\t\t\tfor (var i = 0; i < entries; i++) {\n\t\t\t\t\t\tvar entryOffset = dataStart + i * 12 + 2;\n\t\t\t\t\t\tif (dataView.getUint16(entryOffset, !bigEnd) == 0x0112) {\n\t\t\t\t\t\t\tvar valueType = dataView.getUint16(entryOffset + 2, !bigEnd);\n\t\t\t\t\t\t\tvar numValues = dataView.getUint32(entryOffset + 4, !bigEnd);\n\t\t\t\t\t\t\tif (valueType != 3 && numValues != 1) {\n\t\t\t\t\t\t\t\tconsole.log('Invalid EXIF orientation value type (' + valueType + ') or count (' + numValues + ')');\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar value = dataView.getUint16(entryOffset + 8, !bigEnd);\n\t\t\t\t\t\t\tif (value < 1 || value > 8) {\n\t\t\t\t\t\t\t\tconsole.log('Invalid EXIF orientation value (' + value + ')');\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toffset += 2 + dataView.getUint16(offset + 2);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\n\t\tfixOrientation: function fixOrientation(origObjURL, orientation, targetImg) {\n\t\t\t// fix image orientation based on exif orientation data\n\t\t\t// exif orientation information\n\t\t\t//    http://www.impulseadventure.com/photo/exif-orientation.html\n\t\t\t//    link source wikipedia (https://en.wikipedia.org/wiki/Exif#cite_note-20)\n\t\t\tvar img = new Image();\n\t\t\timg.addEventListener('load', function (event) {\n\t\t\t\tvar canvas = document.createElement('canvas');\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\t// switch width height if orientation needed\n\t\t\t\tif (orientation < 5) {\n\t\t\t\t\tcanvas.width = img.width;\n\t\t\t\t\tcanvas.height = img.height;\n\t\t\t\t} else {\n\t\t\t\t\tcanvas.width = img.height;\n\t\t\t\t\tcanvas.height = img.width;\n\t\t\t\t}\n\n\t\t\t\t// transform (rotate) image - see link at beginning this method\n\t\t\t\tswitch (orientation) {\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tctx.transform(-1, 0, 0, 1, img.width, 0);break;\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tctx.transform(-1, 0, 0, -1, img.width, img.height);break;\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tctx.transform(1, 0, 0, -1, 0, img.height);break;\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tctx.transform(0, 1, 1, 0, 0, 0);break;\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tctx.transform(0, 1, -1, 0, img.height, 0);break;\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tctx.transform(0, -1, -1, 0, img.height, img.width);break;\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\tctx.transform(0, -1, 1, 0, 0, img.width);break;\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage(img, 0, 0);\n\t\t\t\t// pass rotated image data to the target image container\n\t\t\t\ttargetImg.src = canvas.toDataURL();\n\t\t\t}, false);\n\t\t\t// start transformation by load event\n\t\t\timg.src = origObjURL;\n\t\t},\n\n\t\tattach: function attach(elem) {\n\t\t\t// create webcam preview and attach to DOM element\n\t\t\t// pass in actual DOM reference, ID, or CSS selector\n\t\t\tif (typeof elem == 'string') {\n\t\t\t\telem = document.getElementById(elem) || document.querySelector(elem);\n\t\t\t}\n\t\t\tif (!elem) {\n\t\t\t\treturn this.dispatch('error', new WebcamError(\"Could not locate DOM element to attach to.\"));\n\t\t\t}\n\t\t\tthis.container = elem;\n\t\t\telem.innerHTML = ''; // start with empty element\n\n\t\t\t// insert \"peg\" so we can insert our preview canvas adjacent to it later on\n\t\t\tvar peg = document.createElement('div');\n\t\t\telem.appendChild(peg);\n\t\t\tthis.peg = peg;\n\n\t\t\t// set width/height if not already set\n\t\t\tif (!this.params.width) this.params.width = elem.offsetWidth;\n\t\t\tif (!this.params.height) this.params.height = elem.offsetHeight;\n\n\t\t\t// make sure we have a nonzero width and height at this point\n\t\t\tif (!this.params.width || !this.params.height) {\n\t\t\t\treturn this.dispatch('error', new WebcamError(\"No width and/or height for webcam.  Please call set() first, or attach to a visible element.\"));\n\t\t\t}\n\n\t\t\t// set defaults for dest_width / dest_height if not set\n\t\t\tif (!this.params.dest_width) this.params.dest_width = this.params.width;\n\t\t\tif (!this.params.dest_height) this.params.dest_height = this.params.height;\n\n\t\t\tthis.userMedia = _userMedia === undefined ? this.userMedia : _userMedia;\n\t\t\t// if force_flash is set, disable userMedia\n\t\t\tif (this.params.force_flash) {\n\t\t\t\t_userMedia = this.userMedia;\n\t\t\t\tthis.userMedia = null;\n\t\t\t}\n\n\t\t\t// check for default fps\n\t\t\tif (typeof this.params.fps !== \"number\") this.params.fps = 30;\n\n\t\t\t// adjust scale if dest_width or dest_height is different\n\t\t\tvar scaleX = this.params.width / this.params.dest_width;\n\t\t\tvar scaleY = this.params.height / this.params.dest_height;\n\n\t\t\tif (this.userMedia) {\n\t\t\t\t// setup webcam video container\n\t\t\t\tvar video = document.createElement('video');\n\t\t\t\tvideo.setAttribute('autoplay', 'autoplay');\n\t\t\t\tvideo.style.width = '' + this.params.dest_width + 'px';\n\t\t\t\tvideo.style.height = '' + this.params.dest_height + 'px';\n\n\t\t\t\tif (scaleX != 1.0 || scaleY != 1.0) {\n\t\t\t\t\telem.style.overflow = 'hidden';\n\t\t\t\t\tvideo.style.webkitTransformOrigin = '0px 0px';\n\t\t\t\t\tvideo.style.mozTransformOrigin = '0px 0px';\n\t\t\t\t\tvideo.style.msTransformOrigin = '0px 0px';\n\t\t\t\t\tvideo.style.oTransformOrigin = '0px 0px';\n\t\t\t\t\tvideo.style.transformOrigin = '0px 0px';\n\t\t\t\t\tvideo.style.webkitTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\t\tvideo.style.mozTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\t\tvideo.style.msTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\t\tvideo.style.oTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\t\tvideo.style.transform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\t}\n\n\t\t\t\t// add video element to dom\n\t\t\t\telem.appendChild(video);\n\t\t\t\tthis.video = video;\n\n\t\t\t\t// ask user for access to their camera\n\t\t\t\tvar self = this;\n\t\t\t\tthis.mediaDevices.getUserMedia({\n\t\t\t\t\t\"audio\": false,\n\t\t\t\t\t\"video\": this.params.constraints || {\n\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\tminWidth: this.params.dest_width,\n\t\t\t\t\t\t\tminHeight: this.params.dest_height\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then(function (stream) {\n\t\t\t\t\t// got access, attach stream to video\n\t\t\t\t\tvideo.onloadedmetadata = function (e) {\n\t\t\t\t\t\tself.stream = stream;\n\t\t\t\t\t\tself.loaded = true;\n\t\t\t\t\t\tself.live = true;\n\t\t\t\t\t\tself.dispatch('load');\n\t\t\t\t\t\tself.dispatch('live');\n\t\t\t\t\t\tself.flip();\n\t\t\t\t\t};\n\t\t\t\t\t// as window.URL.createObjectURL() is deprecated, adding a check so that it works in Safari.\n\t\t\t\t\t// older browsers may not have srcObject\n\t\t\t\t\tif (\"srcObject\" in video) {\n\t\t\t\t\t\tvideo.srcObject = stream;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// using URL.createObjectURL() as fallback for old browsers\n\t\t\t\t\t\tvideo.src = window.URL.createObjectURL(stream);\n\t\t\t\t\t}\n\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t// JH 2016-07-31 Instead of dispatching error, now falling back to Flash if userMedia fails (thx @john2014)\n\t\t\t\t\t// JH 2016-08-07 But only if flash is actually installed -- if not, dispatch error here and now.\n\t\t\t\t\tif (self.params.enable_flash && self.detectFlash()) {\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tself.params.force_flash = 1;self.attach(elem);\n\t\t\t\t\t\t}, 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.dispatch('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (this.iOS) {\n\t\t\t\t// prepare HTML elements\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.id = this.container.id + '-ios_div';\n\t\t\t\tdiv.className = 'webcamjs-ios-placeholder';\n\t\t\t\tdiv.style.width = '' + this.params.width + 'px';\n\t\t\t\tdiv.style.height = '' + this.params.height + 'px';\n\t\t\t\tdiv.style.textAlign = 'center';\n\t\t\t\tdiv.style.display = 'table-cell';\n\t\t\t\tdiv.style.verticalAlign = 'middle';\n\t\t\t\tdiv.style.backgroundRepeat = 'no-repeat';\n\t\t\t\tdiv.style.backgroundSize = 'contain';\n\t\t\t\tdiv.style.backgroundPosition = 'center';\n\t\t\t\tvar span = document.createElement('span');\n\t\t\t\tspan.className = 'webcamjs-ios-text';\n\t\t\t\tspan.innerHTML = this.params.iosPlaceholderText;\n\t\t\t\tdiv.appendChild(span);\n\t\t\t\tvar img = document.createElement('img');\n\t\t\t\timg.id = this.container.id + '-ios_img';\n\t\t\t\timg.style.width = '' + this.params.dest_width + 'px';\n\t\t\t\timg.style.height = '' + this.params.dest_height + 'px';\n\t\t\t\timg.style.display = 'none';\n\t\t\t\tdiv.appendChild(img);\n\t\t\t\tvar input = document.createElement('input');\n\t\t\t\tinput.id = this.container.id + '-ios_input';\n\t\t\t\tinput.setAttribute('type', 'file');\n\t\t\t\tinput.setAttribute('accept', 'image/*');\n\t\t\t\tinput.setAttribute('capture', 'camera');\n\n\t\t\t\tvar self = this;\n\t\t\t\tvar params = this.params;\n\t\t\t\t// add input listener to load the selected image\n\t\t\t\tinput.addEventListener('change', function (event) {\n\t\t\t\t\tif (event.target.files.length > 0 && event.target.files[0].type.indexOf('image/') == 0) {\n\t\t\t\t\t\tvar objURL = URL.createObjectURL(event.target.files[0]);\n\n\t\t\t\t\t\t// load image with auto scale and crop\n\t\t\t\t\t\tvar image = new Image();\n\t\t\t\t\t\timage.addEventListener('load', function (event) {\n\t\t\t\t\t\t\tvar canvas = document.createElement('canvas');\n\t\t\t\t\t\t\tcanvas.width = params.dest_width;\n\t\t\t\t\t\t\tcanvas.height = params.dest_height;\n\t\t\t\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\t\t\t\t// crop and scale image for final size\n\t\t\t\t\t\t\tratio = Math.min(image.width / params.dest_width, image.height / params.dest_height);\n\t\t\t\t\t\t\tvar sw = params.dest_width * ratio;\n\t\t\t\t\t\t\tvar sh = params.dest_height * ratio;\n\t\t\t\t\t\t\tvar sx = (image.width - sw) / 2;\n\t\t\t\t\t\t\tvar sy = (image.height - sh) / 2;\n\t\t\t\t\t\t\tctx.drawImage(image, sx, sy, sw, sh, 0, 0, params.dest_width, params.dest_height);\n\n\t\t\t\t\t\t\tvar dataURL = canvas.toDataURL();\n\t\t\t\t\t\t\timg.src = dataURL;\n\t\t\t\t\t\t\tdiv.style.backgroundImage = \"url('\" + dataURL + \"')\";\n\t\t\t\t\t\t}, false);\n\n\t\t\t\t\t\t// read EXIF data\n\t\t\t\t\t\tvar fileReader = new FileReader();\n\t\t\t\t\t\tfileReader.addEventListener('load', function (e) {\n\t\t\t\t\t\t\tvar orientation = self.exifOrientation(e.target.result);\n\t\t\t\t\t\t\tif (orientation > 1) {\n\t\t\t\t\t\t\t\t// image need to rotate (see comments on fixOrientation method for more information)\n\t\t\t\t\t\t\t\t// transform image and load to image object\n\t\t\t\t\t\t\t\tself.fixOrientation(objURL, orientation, image);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// load image data to image object\n\t\t\t\t\t\t\t\timage.src = objURL;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, false);\n\n\t\t\t\t\t\t// Convert image data to blob format\n\t\t\t\t\t\tvar http = new XMLHttpRequest();\n\t\t\t\t\t\thttp.open(\"GET\", objURL, true);\n\t\t\t\t\t\thttp.responseType = \"blob\";\n\t\t\t\t\t\thttp.onload = function (e) {\n\t\t\t\t\t\t\tif (this.status == 200 || this.status === 0) {\n\t\t\t\t\t\t\t\tfileReader.readAsArrayBuffer(this.response);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\thttp.send();\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t\tinput.style.display = 'none';\n\t\t\t\telem.appendChild(input);\n\t\t\t\t// make div clickable for open camera interface\n\t\t\t\tdiv.addEventListener('click', function (event) {\n\t\t\t\t\tif (params.user_callback) {\n\t\t\t\t\t\t// global user_callback defined - create the snapshot\n\t\t\t\t\t\tself.snap(params.user_callback, params.user_canvas);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// no global callback definied for snapshot, load image and wait for external snap method call\n\t\t\t\t\t\tinput.style.display = 'block';\n\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\tinput.click();\n\t\t\t\t\t\tinput.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t\telem.appendChild(div);\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.live = true;\n\t\t\t} else if (this.params.enable_flash && this.detectFlash()) {\n\t\t\t\t// flash fallback\n\t\t\t\twindow.Webcam = Webcam; // needed for flash-to-js interface\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.innerHTML = this.getSWFHTML();\n\t\t\t\telem.appendChild(div);\n\t\t\t} else {\n\t\t\t\tthis.dispatch('error', new WebcamError(this.params.noInterfaceFoundText));\n\t\t\t}\n\n\t\t\t// setup final crop for live preview\n\t\t\tif (this.params.crop_width && this.params.crop_height) {\n\t\t\t\tvar scaled_crop_width = Math.floor(this.params.crop_width * scaleX);\n\t\t\t\tvar scaled_crop_height = Math.floor(this.params.crop_height * scaleY);\n\n\t\t\t\telem.style.width = '' + scaled_crop_width + 'px';\n\t\t\t\telem.style.height = '' + scaled_crop_height + 'px';\n\t\t\t\telem.style.overflow = 'hidden';\n\n\t\t\t\telem.scrollLeft = Math.floor(this.params.width / 2 - scaled_crop_width / 2);\n\t\t\t\telem.scrollTop = Math.floor(this.params.height / 2 - scaled_crop_height / 2);\n\t\t\t} else {\n\t\t\t\t// no crop, set size to desired\n\t\t\t\telem.style.width = '' + this.params.width + 'px';\n\t\t\t\telem.style.height = '' + this.params.height + 'px';\n\t\t\t}\n\t\t},\n\n\t\treset: function reset() {\n\t\t\t// shutdown camera, reset to potentially attach again\n\t\t\tif (this.preview_active) this.unfreeze();\n\n\t\t\t// attempt to fix issue #64\n\t\t\tthis.unflip();\n\n\t\t\tif (this.userMedia) {\n\t\t\t\tif (this.stream) {\n\t\t\t\t\tif (this.stream.getVideoTracks) {\n\t\t\t\t\t\t// get video track to call stop on it\n\t\t\t\t\t\tvar tracks = this.stream.getVideoTracks();\n\t\t\t\t\t\tif (tracks && tracks[0] && tracks[0].stop) tracks[0].stop();\n\t\t\t\t\t} else if (this.stream.stop) {\n\t\t\t\t\t\t// deprecated, may be removed in future\n\t\t\t\t\t\tthis.stream.stop();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete this.stream;\n\t\t\t\tdelete this.video;\n\t\t\t}\n\n\t\t\tif (this.userMedia !== true && this.loaded && !this.iOS) {\n\t\t\t\t// call for turn off camera in flash\n\t\t\t\tvar movie = this.getMovie();\n\t\t\t\tif (movie && movie._releaseCamera) movie._releaseCamera();\n\t\t\t}\n\n\t\t\tif (this.container) {\n\t\t\t\tthis.container.innerHTML = '';\n\t\t\t\tdelete this.container;\n\t\t\t}\n\n\t\t\tthis.loaded = false;\n\t\t\tthis.live = false;\n\t\t},\n\n\t\tset: function set() {\n\t\t\t// set one or more params\n\t\t\t// variable argument list: 1 param = hash, 2 params = key, value\n\t\t\tif (arguments.length == 1) {\n\t\t\t\tfor (var key in arguments[0]) {\n\t\t\t\t\tthis.params[key] = arguments[0][key];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.params[arguments[0]] = arguments[1];\n\t\t\t}\n\t\t},\n\n\t\ton: function on(name, callback) {\n\t\t\t// set callback hook\n\t\t\tname = name.replace(/^on/i, '').toLowerCase();\n\t\t\tif (!this.hooks[name]) this.hooks[name] = [];\n\t\t\tthis.hooks[name].push(callback);\n\t\t},\n\n\t\toff: function off(name, callback) {\n\t\t\t// remove callback hook\n\t\t\tname = name.replace(/^on/i, '').toLowerCase();\n\t\t\tif (this.hooks[name]) {\n\t\t\t\tif (callback) {\n\t\t\t\t\t// remove one selected callback from list\n\t\t\t\t\tvar idx = this.hooks[name].indexOf(callback);\n\t\t\t\t\tif (idx > -1) this.hooks[name].splice(idx, 1);\n\t\t\t\t} else {\n\t\t\t\t\t// no callback specified, so clear all\n\t\t\t\t\tthis.hooks[name] = [];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tdispatch: function dispatch() {\n\t\t\t// fire hook callback, passing optional value to it\n\t\t\tvar name = arguments[0].replace(/^on/i, '').toLowerCase();\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\t\tif (this.hooks[name] && this.hooks[name].length) {\n\t\t\t\tfor (var idx = 0, len = this.hooks[name].length; idx < len; idx++) {\n\t\t\t\t\tvar hook = this.hooks[name][idx];\n\n\t\t\t\t\tif (typeof hook == 'function') {\n\t\t\t\t\t\t// callback is function reference, call directly\n\t\t\t\t\t\thook.apply(this, args);\n\t\t\t\t\t} else if ((typeof hook === \"undefined\" ? \"undefined\" : _typeof(hook)) == 'object' && hook.length == 2) {\n\t\t\t\t\t\t// callback is PHP-style object instance method\n\t\t\t\t\t\thook[0][hook[1]].apply(hook[0], args);\n\t\t\t\t\t} else if (window[hook]) {\n\t\t\t\t\t\t// callback is global function name\n\t\t\t\t\t\twindow[hook].apply(window, args);\n\t\t\t\t\t}\n\t\t\t\t} // loop\n\t\t\t\treturn true;\n\t\t\t} else if (name == 'error') {\n\t\t\t\tvar message;\n\t\t\t\tif (args[0] instanceof FlashError || args[0] instanceof WebcamError) {\n\t\t\t\t\tmessage = args[0].message;\n\t\t\t\t} else {\n\t\t\t\t\tmessage = \"Could not access webcam: \" + args[0].name + \": \" + args[0].message + \" \" + args[0].toString();\n\t\t\t\t}\n\n\t\t\t\t// default error handler if no custom one specified\n\t\t\t\talert(\"Webcam.js Error: \" + message);\n\t\t\t}\n\n\t\t\treturn false; // no hook defined\n\t\t},\n\n\t\tsetSWFLocation: function setSWFLocation(value) {\n\t\t\t// for backward compatibility.\n\t\t\tthis.set('swfURL', value);\n\t\t},\n\n\t\tdetectFlash: function detectFlash() {\n\t\t\t// return true if browser supports flash, false otherwise\n\t\t\t// Code snippet borrowed from: https://github.com/swfobject/swfobject\n\t\t\tvar SHOCKWAVE_FLASH = \"Shockwave Flash\",\n\t\t\t    SHOCKWAVE_FLASH_AX = \"ShockwaveFlash.ShockwaveFlash\",\n\t\t\t    FLASH_MIME_TYPE = \"application/x-shockwave-flash\",\n\t\t\t    win = window,\n\t\t\t    nav = navigator,\n\t\t\t    hasFlash = false;\n\n\t\t\tif (typeof nav.plugins !== \"undefined\" && _typeof(nav.plugins[SHOCKWAVE_FLASH]) === \"object\") {\n\t\t\t\tvar desc = nav.plugins[SHOCKWAVE_FLASH].description;\n\t\t\t\tif (desc && typeof nav.mimeTypes !== \"undefined\" && nav.mimeTypes[FLASH_MIME_TYPE] && nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin) {\n\t\t\t\t\thasFlash = true;\n\t\t\t\t}\n\t\t\t} else if (typeof win.ActiveXObject !== \"undefined\") {\n\t\t\t\ttry {\n\t\t\t\t\tvar ax = new ActiveXObject(SHOCKWAVE_FLASH_AX);\n\t\t\t\t\tif (ax) {\n\t\t\t\t\t\tvar ver = ax.GetVariable(\"$version\");\n\t\t\t\t\t\tif (ver) hasFlash = true;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn hasFlash;\n\t\t},\n\n\t\tgetSWFHTML: function getSWFHTML() {\n\t\t\t// Return HTML for embedding flash based webcam capture movie\t\t\n\t\t\tvar html = '',\n\t\t\t    swfURL = this.params.swfURL;\n\n\t\t\t// make sure we aren't running locally (flash doesn't work)\n\t\t\tif (location.protocol.match(/file/)) {\n\t\t\t\tthis.dispatch('error', new FlashError(\"Flash does not work from local disk.  Please run from a web server.\"));\n\t\t\t\treturn '<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';\n\t\t\t}\n\n\t\t\t// make sure we have flash\n\t\t\tif (!this.detectFlash()) {\n\t\t\t\tthis.dispatch('error', new FlashError(\"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\"));\n\t\t\t\treturn '<h3 style=\"color:red\">' + this.params.flashNotDetectedText + '</h3>';\n\t\t\t}\n\n\t\t\t// set default swfURL if not explicitly set\n\t\t\tif (!swfURL) {\n\t\t\t\t// find our script tag, and use that base URL\n\t\t\t\tvar base_url = '';\n\t\t\t\tvar scpts = document.getElementsByTagName('script');\n\t\t\t\tfor (var idx = 0, len = scpts.length; idx < len; idx++) {\n\t\t\t\t\tvar src = scpts[idx].getAttribute('src');\n\t\t\t\t\tif (src && src.match(/\\/webcam(\\.min)?\\.js/)) {\n\t\t\t\t\t\tbase_url = src.replace(/\\/webcam(\\.min)?\\.js.*$/, '');\n\t\t\t\t\t\tidx = len;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (base_url) swfURL = base_url + '/webcam.swf';else swfURL = 'webcam.swf';\n\t\t\t}\n\n\t\t\t// if this is the user's first visit, set flashvar so flash privacy settings panel is shown first\n\t\t\tif (window.localStorage && !localStorage.getItem('visited')) {\n\t\t\t\tthis.params.new_user = 1;\n\t\t\t\tlocalStorage.setItem('visited', 1);\n\t\t\t}\n\n\t\t\t// construct flashvars string\n\t\t\tvar flashvars = '';\n\t\t\tfor (var key in this.params) {\n\t\t\t\tif (flashvars) flashvars += '&';\n\t\t\t\tflashvars += key + '=' + escape(this.params[key]);\n\t\t\t}\n\n\t\t\t// construct object/embed tag\n\t\t\thtml += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"' + this.protocol + '://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"' + this.params.width + '\" height=\"' + this.params.height + '\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"' + swfURL + '\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"' + flashvars + '\"/><embed id=\"webcam_movie_embed\" src=\"' + swfURL + '\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"' + this.params.width + '\" height=\"' + this.params.height + '\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"' + flashvars + '\"></embed></object>';\n\n\t\t\treturn html;\n\t\t},\n\n\t\tgetMovie: function getMovie() {\n\t\t\t// get reference to movie object/embed in DOM\n\t\t\tif (!this.loaded) return this.dispatch('error', new FlashError(\"Flash Movie is not loaded yet\"));\n\t\t\tvar movie = document.getElementById('webcam_movie_obj');\n\t\t\tif (!movie || !movie._snap) movie = document.getElementById('webcam_movie_embed');\n\t\t\tif (!movie) this.dispatch('error', new FlashError(\"Cannot locate Flash movie in DOM\"));\n\t\t\treturn movie;\n\t\t},\n\n\t\tfreeze: function freeze() {\n\t\t\t// show preview, freeze camera\n\t\t\tvar self = this;\n\t\t\tvar params = this.params;\n\n\t\t\t// kill preview if already active\n\t\t\tif (this.preview_active) this.unfreeze();\n\n\t\t\t// determine scale factor\n\t\t\tvar scaleX = this.params.width / this.params.dest_width;\n\t\t\tvar scaleY = this.params.height / this.params.dest_height;\n\n\t\t\t// must unflip container as preview canvas will be pre-flipped\n\t\t\tthis.unflip();\n\n\t\t\t// calc final size of image\n\t\t\tvar final_width = params.crop_width || params.dest_width;\n\t\t\tvar final_height = params.crop_height || params.dest_height;\n\n\t\t\t// create canvas for holding preview\n\t\t\tvar preview_canvas = document.createElement('canvas');\n\t\t\tpreview_canvas.width = final_width;\n\t\t\tpreview_canvas.height = final_height;\n\t\t\tvar preview_context = preview_canvas.getContext('2d');\n\n\t\t\t// save for later use\n\t\t\tthis.preview_canvas = preview_canvas;\n\t\t\tthis.preview_context = preview_context;\n\n\t\t\t// scale for preview size\n\t\t\tif (scaleX != 1.0 || scaleY != 1.0) {\n\t\t\t\tpreview_canvas.style.webkitTransformOrigin = '0px 0px';\n\t\t\t\tpreview_canvas.style.mozTransformOrigin = '0px 0px';\n\t\t\t\tpreview_canvas.style.msTransformOrigin = '0px 0px';\n\t\t\t\tpreview_canvas.style.oTransformOrigin = '0px 0px';\n\t\t\t\tpreview_canvas.style.transformOrigin = '0px 0px';\n\t\t\t\tpreview_canvas.style.webkitTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\tpreview_canvas.style.mozTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\tpreview_canvas.style.msTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\tpreview_canvas.style.oTransform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t\tpreview_canvas.style.transform = 'scaleX(' + scaleX + ') scaleY(' + scaleY + ')';\n\t\t\t}\n\n\t\t\t// take snapshot, but fire our own callback\n\t\t\tthis.snap(function () {\n\t\t\t\t// add preview image to dom, adjust for crop\n\t\t\t\tpreview_canvas.style.position = 'relative';\n\t\t\t\tpreview_canvas.style.left = '' + self.container.scrollLeft + 'px';\n\t\t\t\tpreview_canvas.style.top = '' + self.container.scrollTop + 'px';\n\n\t\t\t\tself.container.insertBefore(preview_canvas, self.peg);\n\t\t\t\tself.container.style.overflow = 'hidden';\n\n\t\t\t\t// set flag for user capture (use preview)\n\t\t\t\tself.preview_active = true;\n\t\t\t}, preview_canvas);\n\t\t},\n\n\t\tunfreeze: function unfreeze() {\n\t\t\t// cancel preview and resume live video feed\n\t\t\tif (this.preview_active) {\n\t\t\t\t// remove preview canvas\n\t\t\t\tthis.container.removeChild(this.preview_canvas);\n\t\t\t\tdelete this.preview_context;\n\t\t\t\tdelete this.preview_canvas;\n\n\t\t\t\t// unflag\n\t\t\t\tthis.preview_active = false;\n\n\t\t\t\t// re-flip if we unflipped before\n\t\t\t\tthis.flip();\n\t\t\t}\n\t\t},\n\n\t\tflip: function flip() {\n\t\t\t// flip container horiz (mirror mode) if desired\n\t\t\tif (this.params.flip_horiz) {\n\t\t\t\tvar sty = this.container.style;\n\t\t\t\tsty.webkitTransform = 'scaleX(-1)';\n\t\t\t\tsty.mozTransform = 'scaleX(-1)';\n\t\t\t\tsty.msTransform = 'scaleX(-1)';\n\t\t\t\tsty.oTransform = 'scaleX(-1)';\n\t\t\t\tsty.transform = 'scaleX(-1)';\n\t\t\t\tsty.filter = 'FlipH';\n\t\t\t\tsty.msFilter = 'FlipH';\n\t\t\t}\n\t\t},\n\n\t\tunflip: function unflip() {\n\t\t\t// unflip container horiz (mirror mode) if desired\n\t\t\tif (this.params.flip_horiz) {\n\t\t\t\tvar sty = this.container.style;\n\t\t\t\tsty.webkitTransform = 'scaleX(1)';\n\t\t\t\tsty.mozTransform = 'scaleX(1)';\n\t\t\t\tsty.msTransform = 'scaleX(1)';\n\t\t\t\tsty.oTransform = 'scaleX(1)';\n\t\t\t\tsty.transform = 'scaleX(1)';\n\t\t\t\tsty.filter = '';\n\t\t\t\tsty.msFilter = '';\n\t\t\t}\n\t\t},\n\n\t\tsavePreview: function savePreview(user_callback, user_canvas) {\n\t\t\t// save preview freeze and fire user callback\n\t\t\tvar params = this.params;\n\t\t\tvar canvas = this.preview_canvas;\n\t\t\tvar context = this.preview_context;\n\n\t\t\t// render to user canvas if desired\n\t\t\tif (user_canvas) {\n\t\t\t\tvar user_context = user_canvas.getContext('2d');\n\t\t\t\tuser_context.drawImage(canvas, 0, 0);\n\t\t\t}\n\n\t\t\t// fire user callback if desired\n\t\t\tuser_callback(user_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100), canvas, context);\n\n\t\t\t// remove preview\n\t\t\tif (this.params.unfreeze_snap) this.unfreeze();\n\t\t},\n\n\t\tsnap: function snap(user_callback, user_canvas) {\n\t\t\t// use global callback and canvas if not defined as parameter\n\t\t\tif (!user_callback) user_callback = this.params.user_callback;\n\t\t\tif (!user_canvas) user_canvas = this.params.user_canvas;\n\n\t\t\t// take snapshot and return image data uri\n\t\t\tvar self = this;\n\t\t\tvar params = this.params;\n\n\t\t\tif (!this.loaded) return this.dispatch('error', new WebcamError(\"Webcam is not loaded yet\"));\n\t\t\t// if (!this.live) return this.dispatch('error', new WebcamError(\"Webcam is not live yet\"));\n\t\t\tif (!user_callback) return this.dispatch('error', new WebcamError(\"Please provide a callback function or canvas to snap()\"));\n\n\t\t\t// if we have an active preview freeze, use that\n\t\t\tif (this.preview_active) {\n\t\t\t\tthis.savePreview(user_callback, user_canvas);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// create offscreen canvas element to hold pixels\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tcanvas.width = this.params.dest_width;\n\t\t\tcanvas.height = this.params.dest_height;\n\t\t\tvar context = canvas.getContext('2d');\n\n\t\t\t// flip canvas horizontally if desired\n\t\t\tif (this.params.flip_horiz) {\n\t\t\t\tcontext.translate(params.dest_width, 0);\n\t\t\t\tcontext.scale(-1, 1);\n\t\t\t}\n\n\t\t\t// create inline function, called after image load (flash) or immediately (native)\n\t\t\tvar func = function func() {\n\t\t\t\t// render image if needed (flash)\n\t\t\t\tif (this.src && this.width && this.height) {\n\t\t\t\t\tcontext.drawImage(this, 0, 0, params.dest_width, params.dest_height);\n\t\t\t\t}\n\n\t\t\t\t// crop if desired\n\t\t\t\tif (params.crop_width && params.crop_height) {\n\t\t\t\t\tvar crop_canvas = document.createElement('canvas');\n\t\t\t\t\tcrop_canvas.width = params.crop_width;\n\t\t\t\t\tcrop_canvas.height = params.crop_height;\n\t\t\t\t\tvar crop_context = crop_canvas.getContext('2d');\n\n\t\t\t\t\tcrop_context.drawImage(canvas, Math.floor(params.dest_width / 2 - params.crop_width / 2), Math.floor(params.dest_height / 2 - params.crop_height / 2), params.crop_width, params.crop_height, 0, 0, params.crop_width, params.crop_height);\n\n\t\t\t\t\t// swap canvases\n\t\t\t\t\tcontext = crop_context;\n\t\t\t\t\tcanvas = crop_canvas;\n\t\t\t\t}\n\n\t\t\t\t// render to user canvas if desired\n\t\t\t\tif (user_canvas) {\n\t\t\t\t\tvar user_context = user_canvas.getContext('2d');\n\t\t\t\t\tuser_context.drawImage(canvas, 0, 0);\n\t\t\t\t}\n\n\t\t\t\t// fire user callback if desired\n\t\t\t\tuser_callback(user_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100), canvas, context);\n\t\t\t};\n\n\t\t\t// grab image frame from userMedia or flash movie\n\t\t\tif (this.userMedia) {\n\t\t\t\t// native implementation\n\t\t\t\tcontext.drawImage(this.video, 0, 0, this.params.dest_width, this.params.dest_height);\n\n\t\t\t\t// fire callback right away\n\t\t\t\tfunc();\n\t\t\t} else if (this.iOS) {\n\t\t\t\tvar div = document.getElementById(this.container.id + '-ios_div');\n\t\t\t\tvar img = document.getElementById(this.container.id + '-ios_img');\n\t\t\t\tvar input = document.getElementById(this.container.id + '-ios_input');\n\t\t\t\t// function for handle snapshot event (call user_callback and reset the interface)\n\t\t\t\tiFunc = function (_iFunc) {\n\t\t\t\t\tfunction iFunc(_x) {\n\t\t\t\t\t\treturn _iFunc.apply(this, arguments);\n\t\t\t\t\t}\n\n\t\t\t\t\tiFunc.toString = function () {\n\t\t\t\t\t\treturn _iFunc.toString();\n\t\t\t\t\t};\n\n\t\t\t\t\treturn iFunc;\n\t\t\t\t}(function (event) {\n\t\t\t\t\tfunc.call(img);\n\t\t\t\t\timg.removeEventListener('load', iFunc);\n\t\t\t\t\tdiv.style.backgroundImage = 'none';\n\t\t\t\t\timg.removeAttribute('src');\n\t\t\t\t\tinput.value = null;\n\t\t\t\t});\n\t\t\t\tif (!input.value) {\n\t\t\t\t\t// No image selected yet, activate input field\n\t\t\t\t\timg.addEventListener('load', iFunc);\n\t\t\t\t\tinput.style.display = 'block';\n\t\t\t\t\tinput.focus();\n\t\t\t\t\tinput.click();\n\t\t\t\t\tinput.style.display = 'none';\n\t\t\t\t} else {\n\t\t\t\t\t// Image already selected\n\t\t\t\t\tiFunc(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// flash fallback\n\t\t\t\tvar raw_data = this.getMovie()._snap();\n\n\t\t\t\t// render to image, fire callback when complete\n\t\t\t\tvar img = new Image();\n\t\t\t\timg.onload = func;\n\t\t\t\timg.src = 'data:image/' + this.params.image_format + ';base64,' + raw_data;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tconfigure: function configure(panel) {\n\t\t\t// open flash configuration panel -- specify tab name:\n\t\t\t// \"camera\", \"privacy\", \"default\", \"localStorage\", \"microphone\", \"settingsManager\"\n\t\t\tif (!panel) panel = \"camera\";\n\t\t\tthis.getMovie()._configure(panel);\n\t\t},\n\n\t\tflashNotify: function flashNotify(type, msg) {\n\t\t\t// receive notification from flash about event\n\t\t\tswitch (type) {\n\t\t\t\tcase 'flashLoadComplete':\n\t\t\t\t\t// movie loaded successfully\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t\tthis.dispatch('load');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'cameraLive':\n\t\t\t\t\t// camera is live and ready to snap\n\t\t\t\t\tthis.live = true;\n\t\t\t\t\tthis.dispatch('live');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'error':\n\t\t\t\t\t// Flash error\n\t\t\t\t\tthis.dispatch('error', new FlashError(msg));\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// catch-all event, just in case\n\t\t\t\t\t// console.log(\"webcam flash_notify: \" + type + \": \" + msg);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\tb64ToUint6: function b64ToUint6(nChr) {\n\t\t\t// convert base64 encoded character to 6-bit integer\n\t\t\t// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\n\t\t\treturn nChr > 64 && nChr < 91 ? nChr - 65 : nChr > 96 && nChr < 123 ? nChr - 71 : nChr > 47 && nChr < 58 ? nChr + 4 : nChr === 43 ? 62 : nChr === 47 ? 63 : 0;\n\t\t},\n\n\t\tbase64DecToArr: function base64DecToArr(sBase64, nBlocksSize) {\n\t\t\t// convert base64 encoded string to Uintarray\n\t\t\t// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\n\t\t\tvar sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"),\n\t\t\t    nInLen = sB64Enc.length,\n\t\t\t    nOutLen = nBlocksSize ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize : nInLen * 3 + 1 >> 2,\n\t\t\t    taBytes = new Uint8Array(nOutLen);\n\n\t\t\tfor (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n\t\t\t\tnMod4 = nInIdx & 3;\n\t\t\t\tnUint24 |= this.b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4;\n\t\t\t\tif (nMod4 === 3 || nInLen - nInIdx === 1) {\n\t\t\t\t\tfor (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n\t\t\t\t\t\ttaBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\n\t\t\t\t\t}\n\t\t\t\t\tnUint24 = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn taBytes;\n\t\t},\n\n\t\tupload: function upload(image_data_uri, target_url, callback) {\n\t\t\t// submit image data to server using binary AJAX\n\t\t\tvar form_elem_name = this.params.upload_name || 'webcam';\n\n\t\t\t// detect image format from within image_data_uri\n\t\t\tvar image_fmt = '';\n\t\t\tif (image_data_uri.match(/^data\\:image\\/(\\w+)/)) image_fmt = RegExp.$1;else throw \"Cannot locate image format in Data URI\";\n\n\t\t\t// extract raw base64 data from Data URI\n\t\t\tvar raw_image_data = image_data_uri.replace(/^data\\:image\\/\\w+\\;base64\\,/, '');\n\n\t\t\t// contruct use AJAX object\n\t\t\tvar http = new XMLHttpRequest();\n\t\t\thttp.open(\"POST\", target_url, true);\n\n\t\t\t// setup progress events\n\t\t\tif (http.upload && http.upload.addEventListener) {\n\t\t\t\thttp.upload.addEventListener('progress', function (e) {\n\t\t\t\t\tif (e.lengthComputable) {\n\t\t\t\t\t\tvar progress = e.loaded / e.total;\n\t\t\t\t\t\tWebcam.dispatch('uploadProgress', progress, e);\n\t\t\t\t\t}\n\t\t\t\t}, false);\n\t\t\t}\n\n\t\t\t// completion handler\n\t\t\tvar self = this;\n\t\t\thttp.onload = function () {\n\t\t\t\tif (callback) callback.apply(self, [http.status, http.responseText, http.statusText]);\n\t\t\t\tWebcam.dispatch('uploadComplete', http.status, http.responseText, http.statusText);\n\t\t\t};\n\n\t\t\t// create a blob and decode our base64 to binary\n\t\t\tvar blob = new Blob([this.base64DecToArr(raw_image_data)], { type: 'image/' + image_fmt });\n\n\t\t\t// stuff into a form, so servers can easily receive it as a standard file upload\n\t\t\tvar form = new FormData();\n\t\t\tform.append(form_elem_name, blob, form_elem_name + \".\" + image_fmt.replace(/e/, ''));\n\n\t\t\t// send data to server\n\t\t\thttp.send(form);\n\t\t}\n\n\t};\n\n\tWebcam.init();\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n\t\t\treturn Webcam;\n\t\t}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t} else if ((typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === 'object' && module.exports) {\n\t\tmodule.exports = Webcam;\n\t} else {\n\t\twindow.Webcam = Webcam;\n\t}\n})(window);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// webcam.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f403acd25b44d355b502","/**\r\n * Created by Tomar-Y on 17/07/2018\r\n */\r\nimport webcam from './webcam'\r\nconst Webcam = {\r\n  install: function (Vue) {\r\n    if (typeof window !== 'undefined' && window.Vue) {\r\n      Vue = window.Vue\r\n    }\r\n    Vue.prototype.$Webcam = webcam\r\n  }\r\n}\r\nexport default Webcam\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","// WebcamJS v1.0.25\r\n// Webcam library for capturing JPEG/PNG images in JavaScript\r\n// Attempts getUserMedia, falls back to Flash\r\n// Author: Joseph Huckaby: http://github.com/jhuckaby\r\n// Based on JPEGCam: http://code.google.com/p/jpegcam/\r\n// Copyright (c) 2012 - 2017 Joseph Huckaby\r\n// Licensed under the MIT License\r\n\r\n(function(window) {\r\nvar _userMedia;\r\n\r\n// declare error types\r\n\r\n// inheritance pattern here:\r\n// https://stackoverflow.com/questions/783818/how-do-i-create-a-custom-error-in-javascript\r\nfunction FlashError() {\r\n\tvar temp = Error.apply(this, arguments);\r\n\ttemp.name = this.name = \"FlashError\";\r\n\tthis.stack = temp.stack;\r\n\tthis.message = temp.message;\r\n}\r\n\r\nfunction WebcamError() {\r\n\tvar temp = Error.apply(this, arguments);\r\n\ttemp.name = this.name = \"WebcamError\";\r\n\tthis.stack = temp.stack;\r\n\tthis.message = temp.message;\r\n}\r\n\r\nvar IntermediateInheritor = function() {};\r\nIntermediateInheritor.prototype = Error.prototype;\r\n\r\nFlashError.prototype = new IntermediateInheritor();\r\nWebcamError.prototype = new IntermediateInheritor();\r\n\r\nvar Webcam = {\r\n\tversion: '1.0.25',\r\n\t\r\n\t// globals\r\n\tprotocol: location.protocol.match(/https/i) ? 'https' : 'http',\r\n\tloaded: false,   // true when webcam movie finishes loading\r\n\tlive: false,     // true when webcam is initialized and ready to snap\r\n\tuserMedia: true, // true when getUserMedia is supported natively\r\n\r\n\tiOS: /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream,\r\n\r\n\tparams: {\r\n\t\twidth: 0,\r\n\t\theight: 0,\r\n\t\tdest_width: 0,         // size of captured image\r\n\t\tdest_height: 0,        // these default to width/height\r\n\t\timage_format: 'jpeg',  // image format (may be jpeg or png)\r\n\t\tjpeg_quality: 90,      // jpeg image quality from 0 (worst) to 100 (best)\r\n\t\tenable_flash: true,    // enable flash fallback,\r\n\t\tforce_flash: false,    // force flash mode,\r\n\t\tflip_horiz: false,     // flip image horiz (mirror mode)\r\n\t\tfps: 30,               // camera frames per second\r\n\t\tupload_name: 'webcam', // name of file in upload post data\r\n\t\tconstraints: null,     // custom user media constraints,\r\n\t\tswfURL: '',            // URI to webcam.swf movie (defaults to the js location)\r\n\t\tflashNotDetectedText: 'ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).',\r\n\t\tnoInterfaceFoundText: 'No supported webcam interface found.',\r\n\t\tunfreeze_snap: true,    // Whether to unfreeze the camera after snap (defaults to true)\r\n\t\tiosPlaceholderText: 'Click here to open camera.',\r\n\t\tuser_callback: null,    // callback function for snapshot (used if no user_callback parameter given to snap function)\r\n\t\tuser_canvas: null       // user provided canvas for snapshot (used if no user_canvas parameter given to snap function)\r\n\t},\r\n\r\n\terrors: {\r\n\t\tFlashError: FlashError,\r\n\t\tWebcamError: WebcamError\r\n\t},\r\n\t\r\n\thooks: {}, // callback hook functions\r\n\t\r\n\tinit: function() {\r\n\t\t// initialize, check for getUserMedia support\r\n\t\tvar self = this;\r\n\t\t\r\n\t\t// Setup getUserMedia, with polyfill for older browsers\r\n\t\t// Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n\t\tthis.mediaDevices = (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ? \r\n\t\t\tnavigator.mediaDevices : ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {\r\n\t\t\t\tgetUserMedia: function(c) {\r\n\t\t\t\t\treturn new Promise(function(y, n) {\r\n\t\t\t\t\t\t(navigator.mozGetUserMedia ||\r\n\t\t\t\t\t\tnavigator.webkitGetUserMedia).call(navigator, c, y, n);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t} : null);\r\n\t\t\r\n\t\twindow.URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\r\n\t\tthis.userMedia = this.userMedia && !!this.mediaDevices && !!window.URL;\r\n\t\t\r\n\t\tif (this.iOS) {\r\n\t\t\tthis.userMedia = null;\r\n\t\t}\r\n\t\t\r\n\t\t// Older versions of firefox (< 21) apparently claim support but user media does not actually work\r\n\t\tif (navigator.userAgent.match(/Firefox\\D+(\\d+)/)) {\r\n\t\t\tif (parseInt(RegExp.$1, 10) < 21) this.userMedia = null;\r\n\t\t}\r\n\t\t\r\n\t\t// Make sure media stream is closed when navigating away from page\r\n\t\tif (this.userMedia) {\r\n\t\t\twindow.addEventListener( 'beforeunload', function(event) {\r\n\t\t\t\tself.reset();\r\n\t\t\t} );\r\n\t\t}\r\n\t},\r\n\t\r\n\texifOrientation: function(binFile) {\r\n\t\t// extract orientation information from the image provided by iOS\r\n\t\t// algorithm based on exif-js\r\n\t\tvar dataView = new DataView(binFile);\r\n\t\tif ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\r\n\t\t\tconsole.log('Not a valid JPEG file');\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tvar offset = 2;\r\n\t\tvar marker = null;\r\n\t\twhile (offset < binFile.byteLength) {\r\n\t\t\t// find 0xFFE1 (225 marker)\r\n\t\t\tif (dataView.getUint8(offset) != 0xFF) {\r\n\t\t\t\tconsole.log('Not a valid marker at offset ' + offset + ', found: ' + dataView.getUint8(offset));\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tmarker = dataView.getUint8(offset + 1);\r\n\t\t\tif (marker == 225) {\r\n\t\t\t\toffset += 4;\r\n\t\t\t\tvar str = \"\";\r\n\t\t\t\tfor (n = 0; n < 4; n++) {\r\n\t\t\t\t\tstr += String.fromCharCode(dataView.getUint8(offset+n));\r\n\t\t\t\t}\r\n\t\t\t\tif (str != 'Exif') {\r\n\t\t\t\t\tconsole.log('Not valid EXIF data found');\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\toffset += 6; // tiffOffset\r\n\t\t\t\tvar bigEnd = null;\r\n\r\n\t\t\t\t// test for TIFF validity and endianness\r\n\t\t\t\tif (dataView.getUint16(offset) == 0x4949) {\r\n\t\t\t\t\tbigEnd = false;\r\n\t\t\t\t} else if (dataView.getUint16(offset) == 0x4D4D) {\r\n\t\t\t\t\tbigEnd = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (dataView.getUint16(offset+2, !bigEnd) != 0x002A) {\r\n\t\t\t\t\tconsole.log(\"Not valid TIFF data! (no 0x002A)\");\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar firstIFDOffset = dataView.getUint32(offset+4, !bigEnd);\r\n\t\t\t\tif (firstIFDOffset < 0x00000008) {\r\n\t\t\t\t\tconsole.log(\"Not valid TIFF data! (First offset less than 8)\", dataView.getUint32(offset+4, !bigEnd));\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// extract orientation data\r\n\t\t\t\tvar dataStart = offset + firstIFDOffset;\r\n\t\t\t\tvar entries = dataView.getUint16(dataStart, !bigEnd);\r\n\t\t\t\tfor (var i=0; i<entries; i++) {\r\n\t\t\t\t\tvar entryOffset = dataStart + i*12 + 2;\r\n\t\t\t\t\tif (dataView.getUint16(entryOffset, !bigEnd) == 0x0112) {\r\n\t\t\t\t\t\tvar valueType = dataView.getUint16(entryOffset+2, !bigEnd);\r\n\t\t\t\t\t\tvar numValues = dataView.getUint32(entryOffset+4, !bigEnd);\r\n\t\t\t\t\t\tif (valueType != 3 && numValues != 1) {\r\n\t\t\t\t\t\t\tconsole.log('Invalid EXIF orientation value type ('+valueType+') or count ('+numValues+')');\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar value = dataView.getUint16(entryOffset + 8, !bigEnd);\r\n\t\t\t\t\t\tif (value < 1 || value > 8) {\r\n\t\t\t\t\t\t\tconsole.log('Invalid EXIF orientation value ('+value+')');\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset += 2+dataView.getUint16(offset+2);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t},\r\n\t\r\n\tfixOrientation: function(origObjURL, orientation, targetImg) {\r\n\t\t// fix image orientation based on exif orientation data\r\n\t\t// exif orientation information\r\n\t\t//    http://www.impulseadventure.com/photo/exif-orientation.html\r\n\t\t//    link source wikipedia (https://en.wikipedia.org/wiki/Exif#cite_note-20)\r\n\t\tvar img = new Image();\r\n\t\timg.addEventListener('load', function(event) {\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\t\r\n\t\t\t// switch width height if orientation needed\r\n\t\t\tif (orientation < 5) {\r\n\t\t\t\tcanvas.width = img.width;\r\n\t\t\t\tcanvas.height = img.height;\r\n\t\t\t} else {\r\n\t\t\t\tcanvas.width = img.height;\r\n\t\t\t\tcanvas.height = img.width;\r\n\t\t\t}\r\n\r\n\t\t\t// transform (rotate) image - see link at beginning this method\r\n\t\t\tswitch (orientation) {\r\n\t\t\t\tcase 2: ctx.transform(-1, 0, 0, 1, img.width, 0); break;\r\n\t\t\t\tcase 3: ctx.transform(-1, 0, 0, -1, img.width, img.height); break;\r\n\t\t\t\tcase 4: ctx.transform(1, 0, 0, -1, 0, img.height); break;\r\n\t\t\t\tcase 5: ctx.transform(0, 1, 1, 0, 0, 0); break;\r\n\t\t\t\tcase 6: ctx.transform(0, 1, -1, 0, img.height , 0); break;\r\n\t\t\t\tcase 7: ctx.transform(0, -1, -1, 0, img.height, img.width); break;\r\n\t\t\t\tcase 8: ctx.transform(0, -1, 1, 0, 0, img.width); break;\r\n\t\t\t}\r\n\r\n\t\t\tctx.drawImage(img, 0, 0);\r\n\t\t\t// pass rotated image data to the target image container\r\n\t\t\ttargetImg.src = canvas.toDataURL();\r\n\t\t}, false);\r\n\t\t// start transformation by load event\r\n\t\timg.src = origObjURL;\r\n\t},\r\n\t\r\n\tattach: function(elem) {\r\n\t\t// create webcam preview and attach to DOM element\r\n\t\t// pass in actual DOM reference, ID, or CSS selector\r\n\t\tif (typeof(elem) == 'string') {\r\n\t\t\telem = document.getElementById(elem) || document.querySelector(elem);\r\n\t\t}\r\n\t\tif (!elem) {\r\n\t\t\treturn this.dispatch('error', new WebcamError(\"Could not locate DOM element to attach to.\"));\r\n\t\t}\r\n\t\tthis.container = elem;\r\n\t\telem.innerHTML = ''; // start with empty element\r\n\t\t\r\n\t\t// insert \"peg\" so we can insert our preview canvas adjacent to it later on\r\n\t\tvar peg = document.createElement('div');\r\n\t\telem.appendChild( peg );\r\n\t\tthis.peg = peg;\r\n\t\t\r\n\t\t// set width/height if not already set\r\n\t\tif (!this.params.width) this.params.width = elem.offsetWidth;\r\n\t\tif (!this.params.height) this.params.height = elem.offsetHeight;\r\n\t\t\r\n\t\t// make sure we have a nonzero width and height at this point\r\n\t\tif (!this.params.width || !this.params.height) {\r\n\t\t\treturn this.dispatch('error', new WebcamError(\"No width and/or height for webcam.  Please call set() first, or attach to a visible element.\"));\r\n\t\t}\r\n\t\t\r\n\t\t// set defaults for dest_width / dest_height if not set\r\n\t\tif (!this.params.dest_width) this.params.dest_width = this.params.width;\r\n\t\tif (!this.params.dest_height) this.params.dest_height = this.params.height;\r\n\t\t\r\n\t\tthis.userMedia = _userMedia === undefined ? this.userMedia : _userMedia;\r\n\t\t// if force_flash is set, disable userMedia\r\n\t\tif (this.params.force_flash) {\r\n\t\t\t_userMedia = this.userMedia;\r\n\t\t\tthis.userMedia = null;\r\n\t\t}\r\n\t\t\r\n\t\t// check for default fps\r\n\t\tif (typeof this.params.fps !== \"number\") this.params.fps = 30;\r\n\r\n\t\t// adjust scale if dest_width or dest_height is different\r\n\t\tvar scaleX = this.params.width / this.params.dest_width;\r\n\t\tvar scaleY = this.params.height / this.params.dest_height;\r\n\t\t\r\n\t\tif (this.userMedia) {\r\n\t\t\t// setup webcam video container\r\n\t\t\tvar video = document.createElement('video');\r\n\t\t\tvideo.setAttribute('autoplay', 'autoplay');\r\n\t\t\tvideo.style.width = '' + this.params.dest_width + 'px';\r\n\t\t\tvideo.style.height = '' + this.params.dest_height + 'px';\r\n\t\t\t\r\n\t\t\tif ((scaleX != 1.0) || (scaleY != 1.0)) {\r\n\t\t\t\telem.style.overflow = 'hidden';\r\n\t\t\t\tvideo.style.webkitTransformOrigin = '0px 0px';\r\n\t\t\t\tvideo.style.mozTransformOrigin = '0px 0px';\r\n\t\t\t\tvideo.style.msTransformOrigin = '0px 0px';\r\n\t\t\t\tvideo.style.oTransformOrigin = '0px 0px';\r\n\t\t\t\tvideo.style.transformOrigin = '0px 0px';\r\n\t\t\t\tvideo.style.webkitTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\t\tvideo.style.mozTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\t\tvideo.style.msTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\t\tvideo.style.oTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\t\tvideo.style.transform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// add video element to dom\r\n\t\t\telem.appendChild( video );\r\n\t\t\tthis.video = video;\r\n\t\t\t\r\n\t\t\t// ask user for access to their camera\r\n\t\t\tvar self = this;\r\n\t\t\tthis.mediaDevices.getUserMedia({\r\n\t\t\t\t\"audio\": false,\r\n\t\t\t\t\"video\": this.params.constraints || {\r\n\t\t\t\t\tmandatory: {\r\n\t\t\t\t\t\tminWidth: this.params.dest_width,\r\n\t\t\t\t\t\tminHeight: this.params.dest_height\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then( function(stream) {\r\n\t\t\t\t// got access, attach stream to video\r\n\t\t\t\tvideo.onloadedmetadata = function(e) {\r\n\t\t\t\t\tself.stream = stream;\r\n\t\t\t\t\tself.loaded = true;\r\n\t\t\t\t\tself.live = true;\r\n\t\t\t\t\tself.dispatch('load');\r\n\t\t\t\t\tself.dispatch('live');\r\n\t\t\t\t\tself.flip();\r\n\t\t\t\t};\r\n\t\t\t\t// as window.URL.createObjectURL() is deprecated, adding a check so that it works in Safari.\r\n\t\t\t\t// older browsers may not have srcObject\r\n\t\t\t\tif (\"srcObject\" in video) {\r\n\t\t\t\t  \tvideo.srcObject = stream;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t  \t// using URL.createObjectURL() as fallback for old browsers\r\n\t\t\t\t  \tvideo.src = window.URL.createObjectURL(stream);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch( function(err) {\r\n\t\t\t\t// JH 2016-07-31 Instead of dispatching error, now falling back to Flash if userMedia fails (thx @john2014)\r\n\t\t\t\t// JH 2016-08-07 But only if flash is actually installed -- if not, dispatch error here and now.\r\n\t\t\t\tif (self.params.enable_flash && self.detectFlash()) {\r\n\t\t\t\t\tsetTimeout( function() { self.params.force_flash = 1; self.attach(elem); }, 1 );\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tself.dispatch('error', err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (this.iOS) {\r\n\t\t\t// prepare HTML elements\r\n\t\t\tvar div = document.createElement('div');\r\n\t\t\tdiv.id = this.container.id+'-ios_div';\r\n\t\t\tdiv.className = 'webcamjs-ios-placeholder';\r\n\t\t\tdiv.style.width = '' + this.params.width + 'px';\r\n\t\t\tdiv.style.height = '' + this.params.height + 'px';\r\n\t\t\tdiv.style.textAlign = 'center';\r\n\t\t\tdiv.style.display = 'table-cell';\r\n\t\t\tdiv.style.verticalAlign = 'middle';\r\n\t\t\tdiv.style.backgroundRepeat = 'no-repeat';\r\n\t\t\tdiv.style.backgroundSize = 'contain';\r\n\t\t\tdiv.style.backgroundPosition = 'center';\r\n\t\t\tvar span = document.createElement('span');\r\n\t\t\tspan.className = 'webcamjs-ios-text';\r\n\t\t\tspan.innerHTML = this.params.iosPlaceholderText;\r\n\t\t\tdiv.appendChild(span);\r\n\t\t\tvar img = document.createElement('img');\r\n\t\t\timg.id = this.container.id+'-ios_img';\r\n\t\t\timg.style.width = '' + this.params.dest_width + 'px';\r\n\t\t\timg.style.height = '' + this.params.dest_height + 'px';\r\n\t\t\timg.style.display = 'none';\r\n\t\t\tdiv.appendChild(img);\r\n\t\t\tvar input = document.createElement('input');\r\n\t\t\tinput.id = this.container.id+'-ios_input';\r\n\t\t\tinput.setAttribute('type', 'file');\r\n\t\t\tinput.setAttribute('accept', 'image/*');\r\n\t\t\tinput.setAttribute('capture', 'camera');\r\n\t\t\t\r\n\t\t\tvar self = this;\r\n\t\t\tvar params = this.params;\r\n\t\t\t// add input listener to load the selected image\r\n\t\t\tinput.addEventListener('change', function(event) {\r\n\t\t\t\tif (event.target.files.length > 0 && event.target.files[0].type.indexOf('image/') == 0) {\r\n\t\t\t\t\tvar objURL = URL.createObjectURL(event.target.files[0]);\r\n\r\n\t\t\t\t\t// load image with auto scale and crop\r\n\t\t\t\t\tvar image = new Image();\r\n\t\t\t\t\timage.addEventListener('load', function(event) {\r\n\t\t\t\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\t\t\t\tcanvas.width = params.dest_width;\r\n\t\t\t\t\t\tcanvas.height = params.dest_height;\r\n\t\t\t\t\t\tvar ctx = canvas.getContext('2d');\r\n\r\n\t\t\t\t\t\t// crop and scale image for final size\r\n\t\t\t\t\t\tratio = Math.min(image.width / params.dest_width, image.height / params.dest_height);\r\n\t\t\t\t\t\tvar sw = params.dest_width * ratio;\r\n\t\t\t\t\t\tvar sh = params.dest_height * ratio;\r\n\t\t\t\t\t\tvar sx = (image.width - sw) / 2;\r\n\t\t\t\t\t\tvar sy = (image.height - sh) / 2;\r\n\t\t\t\t\t\tctx.drawImage(image, sx, sy, sw, sh, 0, 0, params.dest_width, params.dest_height);\r\n\r\n\t\t\t\t\t\tvar dataURL = canvas.toDataURL();\r\n\t\t\t\t\t\timg.src = dataURL;\r\n\t\t\t\t\t\tdiv.style.backgroundImage = \"url('\"+dataURL+\"')\";\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// read EXIF data\r\n\t\t\t\t\tvar fileReader = new FileReader();\r\n\t\t\t\t\tfileReader.addEventListener('load', function(e) {\r\n\t\t\t\t\t\tvar orientation = self.exifOrientation(e.target.result);\r\n\t\t\t\t\t\tif (orientation > 1) {\r\n\t\t\t\t\t\t\t// image need to rotate (see comments on fixOrientation method for more information)\r\n\t\t\t\t\t\t\t// transform image and load to image object\r\n\t\t\t\t\t\t\tself.fixOrientation(objURL, orientation, image);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// load image data to image object\r\n\t\t\t\t\t\t\timage.src = objURL;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Convert image data to blob format\r\n\t\t\t\t\tvar http = new XMLHttpRequest();\r\n\t\t\t\t\thttp.open(\"GET\", objURL, true);\r\n\t\t\t\t\thttp.responseType = \"blob\";\r\n\t\t\t\t\thttp.onload = function(e) {\r\n\t\t\t\t\t\tif (this.status == 200 || this.status === 0) {\r\n\t\t\t\t\t\t\tfileReader.readAsArrayBuffer(this.response);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\thttp.send();\r\n\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\tinput.style.display = 'none';\r\n\t\t\telem.appendChild(input);\r\n\t\t\t// make div clickable for open camera interface\r\n\t\t\tdiv.addEventListener('click', function(event) {\r\n\t\t\t\tif (params.user_callback) {\r\n\t\t\t\t\t// global user_callback defined - create the snapshot\r\n\t\t\t\t\tself.snap(params.user_callback, params.user_canvas);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// no global callback definied for snapshot, load image and wait for external snap method call\r\n\t\t\t\t\tinput.style.display = 'block';\r\n\t\t\t\t\tinput.focus();\r\n\t\t\t\t\tinput.click();\r\n\t\t\t\t\tinput.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\telem.appendChild(div);\r\n\t\t\tthis.loaded = true;\r\n\t\t\tthis.live = true;\r\n\t\t}\r\n\t\telse if (this.params.enable_flash && this.detectFlash()) {\r\n\t\t\t// flash fallback\r\n\t\t\twindow.Webcam = Webcam; // needed for flash-to-js interface\r\n\t\t\tvar div = document.createElement('div');\r\n\t\t\tdiv.innerHTML = this.getSWFHTML();\r\n\t\t\telem.appendChild( div );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.dispatch('error', new WebcamError( this.params.noInterfaceFoundText ));\r\n\t\t}\r\n\t\t\r\n\t\t// setup final crop for live preview\r\n\t\tif (this.params.crop_width && this.params.crop_height) {\r\n\t\t\tvar scaled_crop_width = Math.floor( this.params.crop_width * scaleX );\r\n\t\t\tvar scaled_crop_height = Math.floor( this.params.crop_height * scaleY );\r\n\t\t\t\r\n\t\t\telem.style.width = '' + scaled_crop_width + 'px';\r\n\t\t\telem.style.height = '' + scaled_crop_height + 'px';\r\n\t\t\telem.style.overflow = 'hidden';\r\n\t\t\t\r\n\t\t\telem.scrollLeft = Math.floor( (this.params.width / 2) - (scaled_crop_width / 2) );\r\n\t\t\telem.scrollTop = Math.floor( (this.params.height / 2) - (scaled_crop_height / 2) );\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// no crop, set size to desired\r\n\t\t\telem.style.width = '' + this.params.width + 'px';\r\n\t\t\telem.style.height = '' + this.params.height + 'px';\r\n\t\t}\r\n\t},\r\n\t\r\n\treset: function() {\r\n\t\t// shutdown camera, reset to potentially attach again\r\n\t\tif (this.preview_active) this.unfreeze();\r\n\t\t\r\n\t\t// attempt to fix issue #64\r\n\t\tthis.unflip();\r\n\t\t\r\n\t\tif (this.userMedia) {\r\n\t\t\tif (this.stream) {\r\n\t\t\t\tif (this.stream.getVideoTracks) {\r\n\t\t\t\t\t// get video track to call stop on it\r\n\t\t\t\t\tvar tracks = this.stream.getVideoTracks();\r\n\t\t\t\t\tif (tracks && tracks[0] && tracks[0].stop) tracks[0].stop();\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.stream.stop) {\r\n\t\t\t\t\t// deprecated, may be removed in future\r\n\t\t\t\t\tthis.stream.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete this.stream;\r\n\t\t\tdelete this.video;\r\n\t\t}\r\n\r\n\t\tif ((this.userMedia !== true) && this.loaded && !this.iOS) {\r\n\t\t\t// call for turn off camera in flash\r\n\t\t\tvar movie = this.getMovie();\r\n\t\t\tif (movie && movie._releaseCamera) movie._releaseCamera();\r\n\t\t}\r\n\r\n\t\tif (this.container) {\r\n\t\t\tthis.container.innerHTML = '';\r\n\t\t\tdelete this.container;\r\n\t\t}\r\n\t\r\n\t\tthis.loaded = false;\r\n\t\tthis.live = false;\r\n\t},\r\n\t\r\n\tset: function() {\r\n\t\t// set one or more params\r\n\t\t// variable argument list: 1 param = hash, 2 params = key, value\r\n\t\tif (arguments.length == 1) {\r\n\t\t\tfor (var key in arguments[0]) {\r\n\t\t\t\tthis.params[key] = arguments[0][key];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.params[ arguments[0] ] = arguments[1];\r\n\t\t}\r\n\t},\r\n\t\r\n\ton: function(name, callback) {\r\n\t\t// set callback hook\r\n\t\tname = name.replace(/^on/i, '').toLowerCase();\r\n\t\tif (!this.hooks[name]) this.hooks[name] = [];\r\n\t\tthis.hooks[name].push( callback );\r\n\t},\r\n\t\r\n\toff: function(name, callback) {\r\n\t\t// remove callback hook\r\n\t\tname = name.replace(/^on/i, '').toLowerCase();\r\n\t\tif (this.hooks[name]) {\r\n\t\t\tif (callback) {\r\n\t\t\t\t// remove one selected callback from list\r\n\t\t\t\tvar idx = this.hooks[name].indexOf(callback);\r\n\t\t\t\tif (idx > -1) this.hooks[name].splice(idx, 1);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// no callback specified, so clear all\r\n\t\t\t\tthis.hooks[name] = [];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tdispatch: function() {\r\n\t\t// fire hook callback, passing optional value to it\r\n\t\tvar name = arguments[0].replace(/^on/i, '').toLowerCase();\r\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\t\t\r\n\t\tif (this.hooks[name] && this.hooks[name].length) {\r\n\t\t\tfor (var idx = 0, len = this.hooks[name].length; idx < len; idx++) {\r\n\t\t\t\tvar hook = this.hooks[name][idx];\r\n\t\t\t\t\r\n\t\t\t\tif (typeof(hook) == 'function') {\r\n\t\t\t\t\t// callback is function reference, call directly\r\n\t\t\t\t\thook.apply(this, args);\r\n\t\t\t\t}\r\n\t\t\t\telse if ((typeof(hook) == 'object') && (hook.length == 2)) {\r\n\t\t\t\t\t// callback is PHP-style object instance method\r\n\t\t\t\t\thook[0][hook[1]].apply(hook[0], args);\r\n\t\t\t\t}\r\n\t\t\t\telse if (window[hook]) {\r\n\t\t\t\t\t// callback is global function name\r\n\t\t\t\t\twindow[ hook ].apply(window, args);\r\n\t\t\t\t}\r\n\t\t\t} // loop\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse if (name == 'error') {\r\n\t\t\tvar message;\r\n\t\t\tif ((args[0] instanceof FlashError) || (args[0] instanceof WebcamError)) {\r\n\t\t\t\tmessage = args[0].message;\r\n\t\t\t} else {\r\n\t\t\t\tmessage = \"Could not access webcam: \" + args[0].name + \": \" + \r\n\t\t\t\t\targs[0].message + \" \" + args[0].toString();\r\n\t\t\t}\r\n\r\n\t\t\t// default error handler if no custom one specified\r\n\t\t\talert(\"Webcam.js Error: \" + message);\r\n\t\t}\r\n\t\t\r\n\t\treturn false; // no hook defined\r\n\t},\r\n\r\n\tsetSWFLocation: function(value) {\r\n\t\t// for backward compatibility.\r\n\t\tthis.set('swfURL', value);\r\n\t},\r\n\t\r\n\tdetectFlash: function() {\r\n\t\t// return true if browser supports flash, false otherwise\r\n\t\t// Code snippet borrowed from: https://github.com/swfobject/swfobject\r\n\t\tvar SHOCKWAVE_FLASH = \"Shockwave Flash\",\r\n\t\t\tSHOCKWAVE_FLASH_AX = \"ShockwaveFlash.ShockwaveFlash\",\r\n        \tFLASH_MIME_TYPE = \"application/x-shockwave-flash\",\r\n        \twin = window,\r\n        \tnav = navigator,\r\n        \thasFlash = false;\r\n        \r\n        if (typeof nav.plugins !== \"undefined\" && typeof nav.plugins[SHOCKWAVE_FLASH] === \"object\") {\r\n        \tvar desc = nav.plugins[SHOCKWAVE_FLASH].description;\r\n        \tif (desc && (typeof nav.mimeTypes !== \"undefined\" && nav.mimeTypes[FLASH_MIME_TYPE] && nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)) {\r\n        \t\thasFlash = true;\r\n        \t}\r\n        }\r\n        else if (typeof win.ActiveXObject !== \"undefined\") {\r\n        \ttry {\r\n        \t\tvar ax = new ActiveXObject(SHOCKWAVE_FLASH_AX);\r\n        \t\tif (ax) {\r\n        \t\t\tvar ver = ax.GetVariable(\"$version\");\r\n        \t\t\tif (ver) hasFlash = true;\r\n        \t\t}\r\n        \t}\r\n        \tcatch (e) {;}\r\n        }\r\n        \r\n        return hasFlash;\r\n\t},\r\n\t\r\n\tgetSWFHTML: function() {\r\n\t\t// Return HTML for embedding flash based webcam capture movie\t\t\r\n\t\tvar html = '',\r\n\t\t\tswfURL = this.params.swfURL;\r\n\t\t\r\n\t\t// make sure we aren't running locally (flash doesn't work)\r\n\t\tif (location.protocol.match(/file/)) {\r\n\t\t\tthis.dispatch('error', new FlashError(\"Flash does not work from local disk.  Please run from a web server.\"));\r\n\t\t\treturn '<h3 style=\"color:red\">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';\r\n\t\t}\r\n\t\t\r\n\t\t// make sure we have flash\r\n\t\tif (!this.detectFlash()) {\r\n\t\t\tthis.dispatch('error', new FlashError(\"Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.\"));\r\n\t\t\treturn '<h3 style=\"color:red\">' + this.params.flashNotDetectedText + '</h3>';\r\n\t\t}\r\n\t\t\r\n\t\t// set default swfURL if not explicitly set\r\n\t\tif (!swfURL) {\r\n\t\t\t// find our script tag, and use that base URL\r\n\t\t\tvar base_url = '';\r\n\t\t\tvar scpts = document.getElementsByTagName('script');\r\n\t\t\tfor (var idx = 0, len = scpts.length; idx < len; idx++) {\r\n\t\t\t\tvar src = scpts[idx].getAttribute('src');\r\n\t\t\t\tif (src && src.match(/\\/webcam(\\.min)?\\.js/)) {\r\n\t\t\t\t\tbase_url = src.replace(/\\/webcam(\\.min)?\\.js.*$/, '');\r\n\t\t\t\t\tidx = len;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (base_url) swfURL = base_url + '/webcam.swf';\r\n\t\t\telse swfURL = 'webcam.swf';\r\n\t\t}\r\n\t\t\r\n\t\t// if this is the user's first visit, set flashvar so flash privacy settings panel is shown first\r\n\t\tif (window.localStorage && !localStorage.getItem('visited')) {\r\n\t\t\tthis.params.new_user = 1;\r\n\t\t\tlocalStorage.setItem('visited', 1);\r\n\t\t}\r\n\t\t\r\n\t\t// construct flashvars string\r\n\t\tvar flashvars = '';\r\n\t\tfor (var key in this.params) {\r\n\t\t\tif (flashvars) flashvars += '&';\r\n\t\t\tflashvars += key + '=' + escape(this.params[key]);\r\n\t\t}\r\n\t\t\r\n\t\t// construct object/embed tag\r\n\t\thtml += '<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" type=\"application/x-shockwave-flash\" codebase=\"'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" width=\"'+this.params.width+'\" height=\"'+this.params.height+'\" id=\"webcam_movie_obj\" align=\"middle\"><param name=\"wmode\" value=\"opaque\" /><param name=\"allowScriptAccess\" value=\"always\" /><param name=\"allowFullScreen\" value=\"false\" /><param name=\"movie\" value=\"'+swfURL+'\" /><param name=\"loop\" value=\"false\" /><param name=\"menu\" value=\"false\" /><param name=\"quality\" value=\"best\" /><param name=\"bgcolor\" value=\"#ffffff\" /><param name=\"flashvars\" value=\"'+flashvars+'\"/><embed id=\"webcam_movie_embed\" src=\"'+swfURL+'\" wmode=\"opaque\" loop=\"false\" menu=\"false\" quality=\"best\" bgcolor=\"#ffffff\" width=\"'+this.params.width+'\" height=\"'+this.params.height+'\" name=\"webcam_movie_embed\" align=\"middle\" allowScriptAccess=\"always\" allowFullScreen=\"false\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\" flashvars=\"'+flashvars+'\"></embed></object>';\r\n\t\t\r\n\t\treturn html;\r\n\t},\r\n\t\r\n\tgetMovie: function() {\r\n\t\t// get reference to movie object/embed in DOM\r\n\t\tif (!this.loaded) return this.dispatch('error', new FlashError(\"Flash Movie is not loaded yet\"));\r\n\t\tvar movie = document.getElementById('webcam_movie_obj');\r\n\t\tif (!movie || !movie._snap) movie = document.getElementById('webcam_movie_embed');\r\n\t\tif (!movie) this.dispatch('error', new FlashError(\"Cannot locate Flash movie in DOM\"));\r\n\t\treturn movie;\r\n\t},\r\n\t\r\n\tfreeze: function() {\r\n\t\t// show preview, freeze camera\r\n\t\tvar self = this;\r\n\t\tvar params = this.params;\r\n\t\t\r\n\t\t// kill preview if already active\r\n\t\tif (this.preview_active) this.unfreeze();\r\n\t\t\r\n\t\t// determine scale factor\r\n\t\tvar scaleX = this.params.width / this.params.dest_width;\r\n\t\tvar scaleY = this.params.height / this.params.dest_height;\r\n\t\t\r\n\t\t// must unflip container as preview canvas will be pre-flipped\r\n\t\tthis.unflip();\r\n\t\t\r\n\t\t// calc final size of image\r\n\t\tvar final_width = params.crop_width || params.dest_width;\r\n\t\tvar final_height = params.crop_height || params.dest_height;\r\n\t\t\r\n\t\t// create canvas for holding preview\r\n\t\tvar preview_canvas = document.createElement('canvas');\r\n\t\tpreview_canvas.width = final_width;\r\n\t\tpreview_canvas.height = final_height;\r\n\t\tvar preview_context = preview_canvas.getContext('2d');\r\n\t\t\r\n\t\t// save for later use\r\n\t\tthis.preview_canvas = preview_canvas;\r\n\t\tthis.preview_context = preview_context;\r\n\t\t\r\n\t\t// scale for preview size\r\n\t\tif ((scaleX != 1.0) || (scaleY != 1.0)) {\r\n\t\t\tpreview_canvas.style.webkitTransformOrigin = '0px 0px';\r\n\t\t\tpreview_canvas.style.mozTransformOrigin = '0px 0px';\r\n\t\t\tpreview_canvas.style.msTransformOrigin = '0px 0px';\r\n\t\t\tpreview_canvas.style.oTransformOrigin = '0px 0px';\r\n\t\t\tpreview_canvas.style.transformOrigin = '0px 0px';\r\n\t\t\tpreview_canvas.style.webkitTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\tpreview_canvas.style.mozTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\tpreview_canvas.style.msTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\tpreview_canvas.style.oTransform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t\tpreview_canvas.style.transform = 'scaleX('+scaleX+') scaleY('+scaleY+')';\r\n\t\t}\r\n\t\t\r\n\t\t// take snapshot, but fire our own callback\r\n\t\tthis.snap( function() {\r\n\t\t\t// add preview image to dom, adjust for crop\r\n\t\t\tpreview_canvas.style.position = 'relative';\r\n\t\t\tpreview_canvas.style.left = '' + self.container.scrollLeft + 'px';\r\n\t\t\tpreview_canvas.style.top = '' + self.container.scrollTop + 'px';\r\n\t\t\t\r\n\t\t\tself.container.insertBefore( preview_canvas, self.peg );\r\n\t\t\tself.container.style.overflow = 'hidden';\r\n\t\t\t\r\n\t\t\t// set flag for user capture (use preview)\r\n\t\t\tself.preview_active = true;\r\n\t\t\t\r\n\t\t}, preview_canvas );\r\n\t},\r\n\t\r\n\tunfreeze: function() {\r\n\t\t// cancel preview and resume live video feed\r\n\t\tif (this.preview_active) {\r\n\t\t\t// remove preview canvas\r\n\t\t\tthis.container.removeChild( this.preview_canvas );\r\n\t\t\tdelete this.preview_context;\r\n\t\t\tdelete this.preview_canvas;\r\n\t\t\t\r\n\t\t\t// unflag\r\n\t\t\tthis.preview_active = false;\r\n\t\t\t\r\n\t\t\t// re-flip if we unflipped before\r\n\t\t\tthis.flip();\r\n\t\t}\r\n\t},\r\n\t\r\n\tflip: function() {\r\n\t\t// flip container horiz (mirror mode) if desired\r\n\t\tif (this.params.flip_horiz) {\r\n\t\t\tvar sty = this.container.style;\r\n\t\t\tsty.webkitTransform = 'scaleX(-1)';\r\n\t\t\tsty.mozTransform = 'scaleX(-1)';\r\n\t\t\tsty.msTransform = 'scaleX(-1)';\r\n\t\t\tsty.oTransform = 'scaleX(-1)';\r\n\t\t\tsty.transform = 'scaleX(-1)';\r\n\t\t\tsty.filter = 'FlipH';\r\n\t\t\tsty.msFilter = 'FlipH';\r\n\t\t}\r\n\t},\r\n\t\r\n\tunflip: function() {\r\n\t\t// unflip container horiz (mirror mode) if desired\r\n\t\tif (this.params.flip_horiz) {\r\n\t\t\tvar sty = this.container.style;\r\n\t\t\tsty.webkitTransform = 'scaleX(1)';\r\n\t\t\tsty.mozTransform = 'scaleX(1)';\r\n\t\t\tsty.msTransform = 'scaleX(1)';\r\n\t\t\tsty.oTransform = 'scaleX(1)';\r\n\t\t\tsty.transform = 'scaleX(1)';\r\n\t\t\tsty.filter = '';\r\n\t\t\tsty.msFilter = '';\r\n\t\t}\r\n\t},\r\n\t\r\n\tsavePreview: function(user_callback, user_canvas) {\r\n\t\t// save preview freeze and fire user callback\r\n\t\tvar params = this.params;\r\n\t\tvar canvas = this.preview_canvas;\r\n\t\tvar context = this.preview_context;\r\n\t\t\r\n\t\t// render to user canvas if desired\r\n\t\tif (user_canvas) {\r\n\t\t\tvar user_context = user_canvas.getContext('2d');\r\n\t\t\tuser_context.drawImage( canvas, 0, 0 );\r\n\t\t}\r\n\t\t\r\n\t\t// fire user callback if desired\r\n\t\tuser_callback(\r\n\t\t\tuser_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100 ),\r\n\t\t\tcanvas,\r\n\t\t\tcontext\r\n\t\t);\r\n\t\t\r\n\t\t// remove preview\r\n\t\tif (this.params.unfreeze_snap) this.unfreeze();\r\n\t},\r\n\t\r\n\tsnap: function(user_callback, user_canvas) {\r\n\t\t// use global callback and canvas if not defined as parameter\r\n\t\tif (!user_callback) user_callback = this.params.user_callback;\r\n\t\tif (!user_canvas) user_canvas = this.params.user_canvas;\r\n\t\t\r\n\t\t// take snapshot and return image data uri\r\n\t\tvar self = this;\r\n\t\tvar params = this.params;\r\n\t\t\r\n\t\tif (!this.loaded) return this.dispatch('error', new WebcamError(\"Webcam is not loaded yet\"));\r\n\t\t// if (!this.live) return this.dispatch('error', new WebcamError(\"Webcam is not live yet\"));\r\n\t\tif (!user_callback) return this.dispatch('error', new WebcamError(\"Please provide a callback function or canvas to snap()\"));\r\n\t\t\r\n\t\t// if we have an active preview freeze, use that\r\n\t\tif (this.preview_active) {\r\n\t\t\tthis.savePreview( user_callback, user_canvas );\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\t// create offscreen canvas element to hold pixels\r\n\t\tvar canvas = document.createElement('canvas');\r\n\t\tcanvas.width = this.params.dest_width;\r\n\t\tcanvas.height = this.params.dest_height;\r\n\t\tvar context = canvas.getContext('2d');\r\n\t\t\r\n\t\t// flip canvas horizontally if desired\r\n\t\tif (this.params.flip_horiz) {\r\n\t\t\tcontext.translate( params.dest_width, 0 );\r\n\t\t\tcontext.scale( -1, 1 );\r\n\t\t}\r\n\t\t\r\n\t\t// create inline function, called after image load (flash) or immediately (native)\r\n\t\tvar func = function() {\r\n\t\t\t// render image if needed (flash)\r\n\t\t\tif (this.src && this.width && this.height) {\r\n\t\t\t\tcontext.drawImage(this, 0, 0, params.dest_width, params.dest_height);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// crop if desired\r\n\t\t\tif (params.crop_width && params.crop_height) {\r\n\t\t\t\tvar crop_canvas = document.createElement('canvas');\r\n\t\t\t\tcrop_canvas.width = params.crop_width;\r\n\t\t\t\tcrop_canvas.height = params.crop_height;\r\n\t\t\t\tvar crop_context = crop_canvas.getContext('2d');\r\n\t\t\t\t\r\n\t\t\t\tcrop_context.drawImage( canvas, \r\n\t\t\t\t\tMath.floor( (params.dest_width / 2) - (params.crop_width / 2) ),\r\n\t\t\t\t\tMath.floor( (params.dest_height / 2) - (params.crop_height / 2) ),\r\n\t\t\t\t\tparams.crop_width,\r\n\t\t\t\t\tparams.crop_height,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tparams.crop_width,\r\n\t\t\t\t\tparams.crop_height\r\n\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\t// swap canvases\r\n\t\t\t\tcontext = crop_context;\r\n\t\t\t\tcanvas = crop_canvas;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// render to user canvas if desired\r\n\t\t\tif (user_canvas) {\r\n\t\t\t\tvar user_context = user_canvas.getContext('2d');\r\n\t\t\t\tuser_context.drawImage( canvas, 0, 0 );\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// fire user callback if desired\r\n\t\t\tuser_callback(\r\n\t\t\t\tuser_canvas ? null : canvas.toDataURL('image/' + params.image_format, params.jpeg_quality / 100 ),\r\n\t\t\t\tcanvas,\r\n\t\t\t\tcontext\r\n\t\t\t);\r\n\t\t};\r\n\t\t\r\n\t\t// grab image frame from userMedia or flash movie\r\n\t\tif (this.userMedia) {\r\n\t\t\t// native implementation\r\n\t\t\tcontext.drawImage(this.video, 0, 0, this.params.dest_width, this.params.dest_height);\r\n\t\t\t\r\n\t\t\t// fire callback right away\r\n\t\t\tfunc();\r\n\t\t}\r\n\t\telse if (this.iOS) {\r\n\t\t\tvar div = document.getElementById(this.container.id+'-ios_div');\r\n\t\t\tvar img = document.getElementById(this.container.id+'-ios_img');\r\n\t\t\tvar input = document.getElementById(this.container.id+'-ios_input');\r\n\t\t\t// function for handle snapshot event (call user_callback and reset the interface)\r\n\t\t\tiFunc = function(event) {\r\n\t\t\t\tfunc.call(img);\r\n\t\t\t\timg.removeEventListener('load', iFunc);\r\n\t\t\t\tdiv.style.backgroundImage = 'none';\r\n\t\t\t\timg.removeAttribute('src');\r\n\t\t\t\tinput.value = null;\r\n\t\t\t};\r\n\t\t\tif (!input.value) {\r\n\t\t\t\t// No image selected yet, activate input field\r\n\t\t\t\timg.addEventListener('load', iFunc);\r\n\t\t\t\tinput.style.display = 'block';\r\n\t\t\t\tinput.focus();\r\n\t\t\t\tinput.click();\r\n\t\t\t\tinput.style.display = 'none';\r\n\t\t\t} else {\r\n\t\t\t\t// Image already selected\r\n\t\t\t\tiFunc(null);\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// flash fallback\r\n\t\t\tvar raw_data = this.getMovie()._snap();\r\n\t\t\t\r\n\t\t\t// render to image, fire callback when complete\r\n\t\t\tvar img = new Image();\r\n\t\t\timg.onload = func;\r\n\t\t\timg.src = 'data:image/'+this.params.image_format+';base64,' + raw_data;\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t},\r\n\t\r\n\tconfigure: function(panel) {\r\n\t\t// open flash configuration panel -- specify tab name:\r\n\t\t// \"camera\", \"privacy\", \"default\", \"localStorage\", \"microphone\", \"settingsManager\"\r\n\t\tif (!panel) panel = \"camera\";\r\n\t\tthis.getMovie()._configure(panel);\r\n\t},\r\n\t\r\n\tflashNotify: function(type, msg) {\r\n\t\t// receive notification from flash about event\r\n\t\tswitch (type) {\r\n\t\t\tcase 'flashLoadComplete':\r\n\t\t\t\t// movie loaded successfully\r\n\t\t\t\tthis.loaded = true;\r\n\t\t\t\tthis.dispatch('load');\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'cameraLive':\r\n\t\t\t\t// camera is live and ready to snap\r\n\t\t\t\tthis.live = true;\r\n\t\t\t\tthis.dispatch('live');\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'error':\r\n\t\t\t\t// Flash error\r\n\t\t\t\tthis.dispatch('error', new FlashError(msg));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// catch-all event, just in case\r\n\t\t\t\t// console.log(\"webcam flash_notify: \" + type + \": \" + msg);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\t\r\n\tb64ToUint6: function(nChr) {\r\n\t\t// convert base64 encoded character to 6-bit integer\r\n\t\t// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\r\n\t\treturn nChr > 64 && nChr < 91 ? nChr - 65\r\n\t\t\t: nChr > 96 && nChr < 123 ? nChr - 71\r\n\t\t\t: nChr > 47 && nChr < 58 ? nChr + 4\r\n\t\t\t: nChr === 43 ? 62 : nChr === 47 ? 63 : 0;\r\n\t},\r\n\r\n\tbase64DecToArr: function(sBase64, nBlocksSize) {\r\n\t\t// convert base64 encoded string to Uintarray\r\n\t\t// from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Base64_encoding_and_decoding\r\n\t\tvar sB64Enc = sBase64.replace(/[^A-Za-z0-9\\+\\/]/g, \"\"), nInLen = sB64Enc.length,\r\n\t\t\tnOutLen = nBlocksSize ? Math.ceil((nInLen * 3 + 1 >> 2) / nBlocksSize) * nBlocksSize : nInLen * 3 + 1 >> 2, \r\n\t\t\ttaBytes = new Uint8Array(nOutLen);\r\n\t\t\r\n\t\tfor (var nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\r\n\t\t\tnMod4 = nInIdx & 3;\r\n\t\t\tnUint24 |= this.b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << 18 - 6 * nMod4;\r\n\t\t\tif (nMod4 === 3 || nInLen - nInIdx === 1) {\r\n\t\t\t\tfor (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\r\n\t\t\t\t\ttaBytes[nOutIdx] = nUint24 >>> (16 >>> nMod3 & 24) & 255;\r\n\t\t\t\t}\r\n\t\t\t\tnUint24 = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn taBytes;\r\n\t},\r\n\t\r\n\tupload: function(image_data_uri, target_url, callback) {\r\n\t\t// submit image data to server using binary AJAX\r\n\t\tvar form_elem_name = this.params.upload_name || 'webcam';\r\n\t\t\r\n\t\t// detect image format from within image_data_uri\r\n\t\tvar image_fmt = '';\r\n\t\tif (image_data_uri.match(/^data\\:image\\/(\\w+)/))\r\n\t\t\timage_fmt = RegExp.$1;\r\n\t\telse\r\n\t\t\tthrow \"Cannot locate image format in Data URI\";\r\n\t\t\r\n\t\t// extract raw base64 data from Data URI\r\n\t\tvar raw_image_data = image_data_uri.replace(/^data\\:image\\/\\w+\\;base64\\,/, '');\r\n\t\t\r\n\t\t// contruct use AJAX object\r\n\t\tvar http = new XMLHttpRequest();\r\n\t\thttp.open(\"POST\", target_url, true);\r\n\t\t\r\n\t\t// setup progress events\r\n\t\tif (http.upload && http.upload.addEventListener) {\r\n\t\t\thttp.upload.addEventListener( 'progress', function(e) {\r\n\t\t\t\tif (e.lengthComputable) {\r\n\t\t\t\t\tvar progress = e.loaded / e.total;\r\n\t\t\t\t\tWebcam.dispatch('uploadProgress', progress, e);\r\n\t\t\t\t}\r\n\t\t\t}, false );\r\n\t\t}\r\n\t\t\r\n\t\t// completion handler\r\n\t\tvar self = this;\r\n\t\thttp.onload = function() {\r\n\t\t\tif (callback) callback.apply( self, [http.status, http.responseText, http.statusText] );\r\n\t\t\tWebcam.dispatch('uploadComplete', http.status, http.responseText, http.statusText);\r\n\t\t};\r\n\t\t\r\n\t\t// create a blob and decode our base64 to binary\r\n\t\tvar blob = new Blob( [ this.base64DecToArr(raw_image_data) ], {type: 'image/'+image_fmt} );\r\n\t\t\r\n\t\t// stuff into a form, so servers can easily receive it as a standard file upload\r\n\t\tvar form = new FormData();\r\n\t\tform.append( form_elem_name, blob, form_elem_name+\".\"+image_fmt.replace(/e/, '') );\r\n\t\t\r\n\t\t// send data to server\r\n\t\thttp.send(form);\r\n\t}\r\n\t\r\n};\r\n\r\nWebcam.init();\r\nif (typeof define === 'function' && define.amd) {\r\n\tdefine( function() { return Webcam; } );\r\n} \r\nelse if (typeof module === 'object' && module.exports) {\r\n\tmodule.exports = Webcam;\r\n} \r\nelse {\r\n\twindow.Webcam = Webcam;\r\n}\r\n\r\n}(window));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/webcam.js"],"sourceRoot":""}